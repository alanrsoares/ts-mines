{"version":3,"sources":["lib/Grid.ts","lib/game.ts","lib/hooks.ts","lib/StorageAdapter.ts","assets/skull.svg","assets/thinking.svg","assets/cool.svg","ui/theme.ts","ui/styled.ts","ui/components/core.ts","assets/flag.svg","ui/components/GridTile.tsx","ui/components/Grid.tsx","assets/github.svg","ui/components/Github.tsx","assets/eye.svg","ui/components/Footer.tsx","ui/components/Score.tsx","App.tsx","lib/useUpdateChecker.ts"],"names":["isIndexOutOfBounds","value","gridSize","min","max","isBetween","isOutOfBounds","cell","dimensions","row","rows","column","columns","Grid","_dimensions","_grid","length","Array","isArray","this","fill","y","x","push","Error","matrix","previous","getCell","reduce","acc","fn","nextMatrix","map","cells","from","slice","revealTile","tile","assoc","revealMine","kind","isMine","makeNewGrid","chanceOfMines","make","Math","random","surroundingMines","revealed","self","getCellNeighbours","filter","storage","namespace","path","localStorage","setItem","JSON","stringify","defaultValue","getItem","parse","useCachedState","cacheKey","defaultState","useState","read","state","setState","useEffect","persist","_extends","Object","assign","target","i","arguments","source","key","prototype","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_ref2","createElement","d","_ref4","_ref5","cx","cy","r","_ref6","_ref7","_ref8","_ref9","_ref10","_ref","svgRef","title","props","viewBox","ref","ForwardRef","forwardRef","rx","ry","_ref11","_ref12","colors","primary","secondary","positive","negative","neutral","light","muted","hotpink","black","white","gray","dark","shadow","theme","radii","default","sm","md","lg","xl","xxl","xxxl","round","fontSizes","xs","baseFontSize","fontFamilies","display","voice","shadows","inset","top","none","animations","appear","keyframes","glow","darken","getThemeProp","baseUseTheme","lens","$value","getColor","getRadius","getShadow","getFontFamily","getAnimation","styled","baseCSS","Root","div","AppBar","header","Clamp","Brand","Controls","nav","StatusDisplay","p","isGameOver","css","Content","main","Mine","MineIcon","Flag","FlagIcon","numberColors","0","1","2","3","4","5","6","7","8","GridTileContainer","active","children","undefined","GridTile","content","useMemo","flagged","longPressProps","callback","ms","running","setRunning","timeoutIdRef","useRef","cancelTimeout","useCallback","clearTimeout","current","start","stop","setTimeout","onMouseDown","onMouseUp","onMouseLeave","onTouchStart","onTouchEnd","onMouseMove","useLongPress","onLongPress","omit","GridContainer","GridRow","GridComponent","handleClick","onTileClick","handleLongPress","onTileLongPress","grid","activeCell","onClick","GithubIcon","GithubSVG","GithubLabel","GithubBadge","a","Github","rel","href","aria-label","Eye","EyeIcon","Circle","Button","button","color","side","ButtonGroup","Footer","gameMode","onToggleGameMode","ProgressContainer","ProgressLine","progress","ProgressIcon","Score","score","statusAssets","new","won","over","NO_OP","App","useUpdateChecker","setScore","gameStatus","setGameStatus","setGameMode","setActiveCell","Game","snapshot","setGrid","handleCellClick","mode","nextGrid","updateCell","getNextGrid","cellClicked","forEach","neighbourCell","neighbourTile","nextScore","flatten","c","handleCellLongPress","handleStatusClick","handleToggleGameMode","onContextMenu","e","preventDefault","window","addEventListener","removeEventListener","useRightClick","semverGreaterThan","latestVersion","currentVersion","latestParts","split","currentParts","Number","shift","b","isNaN","fetchWithTimeout","timeout","onTimeout","url","timeoutHandle","fetch","response","purgeCache","caches","deleteKeys","delete","Promise","all","checkForAppUpdates","fetchWithTimeoutHandler","Date","now","json","meta","version","global","appVersion","forceReload","location","reload","tryInstallUpdate","console","log","tryCheckForUpdates","confirm","interval","intervalId","setInterval","clearInterval"],"mappings":"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","file":"static/js/4.b7e5e5eb.chunk.js","sourcesContent":["export interface Coordinates {\n  row: number;\n  column: number;\n}\n\nexport interface Dimensions {\n  rows: number;\n  columns: number;\n}\n\nexport type FillFn<T> = (cell: Coordinates, previousValue?: T) => T;\n\nexport interface Cell<T> extends Coordinates {\n  value: T;\n}\n\nexport type Row<T> = Cell<T>[];\n\nexport type Matrix<T> = Row<T>[];\n\nconst isBetween = (min: number, max: number, value: number) =>\n  value >= min && value < max;\n\nconst isIndexOutOfBounds = (value: number, gridSize: number) =>\n  !isBetween(0, gridSize, value);\n\nconst isOutOfBounds = (\n  cell: { row: number; column: number },\n  dimensions: Dimensions\n) =>\n  isIndexOutOfBounds(cell.row, dimensions.rows) ||\n  isIndexOutOfBounds(cell.column, dimensions.columns);\n\nexport default class Grid<T = undefined> {\n  private _dimensions: Dimensions = {\n    rows: 0,\n    columns: 0\n  };\n  private _grid: Matrix<T> = [];\n\n  constructor(seed: Matrix<T>);\n  constructor(dimensions: Dimensions, fill: FillFn<T> | T);\n  constructor(...args: any[]) {\n    if (args.length === 1 && Array.isArray(args[0])) {\n      this._grid = args[0] as Matrix<T>;\n\n      const dimensions: Dimensions = {\n        rows: this._grid.length,\n        columns: this._grid[0].length\n      };\n\n      this._dimensions = dimensions;\n\n      return this;\n    }\n\n    if (typeof args[0] === \"object\" && args[0] !== null) {\n      const dimensions = args[0] as Dimensions;\n      const fill = args[1] as FillFn<T>;\n\n      const rows: Matrix<T> = [];\n\n      for (let y = 0; y < dimensions.rows; y++) {\n        const row: Row<T> = [];\n\n        for (let x = 0; x < dimensions.columns; x++) {\n          const value =\n            typeof fill === \"function\"\n              ? (fill as FillFn<T>)({\n                  row: y,\n                  column: x\n                })\n              : fill;\n\n          row.push({ row: y, column: x, value });\n        }\n\n        rows.push(row);\n      }\n\n      this._dimensions = dimensions;\n      this._grid = rows;\n\n      return this;\n    }\n\n    throw new Error(`Invalid argument: ${args[0]}`);\n  }\n\n  public static make<T>(seed: Matrix<T>): Grid<T>;\n  public static make<T>(dimensions: Dimensions, fill: FillFn<T> | T): Grid<T>;\n  public static make<T>(...args: any[]): Grid<T> {\n    return new Grid(args[0], args[1]);\n  }\n\n  public static from<U>(matrix: Matrix<U>) {\n    return new Grid(matrix);\n  }\n\n  public withSeed(matrix: Matrix<T>) {\n    this._grid = matrix;\n\n    return this;\n  }\n\n  public get snapshot() {\n    return this._grid.slice();\n  }\n\n  public updateCell(\n    { row, column }: Coordinates,\n    fill: FillFn<T> | T\n  ): Grid<T> {\n    const previous = this.getCell({ row, column });\n\n    const value =\n      typeof fill === \"function\"\n        ? (fill as FillFn<T>)({ row, column }, previous.value)\n        : fill;\n\n    this._grid[row][column] = { row, column, value };\n\n    return this;\n  }\n\n  public getCell({ row, column }: Coordinates) {\n    if (!isOutOfBounds({ row, column }, this._dimensions)) {\n      return this._grid[row][column];\n    }\n\n    throw new Error(`Invalid cell coordinates: row: ${row}; column: ${column}`);\n  }\n\n  public getCellNeighbours({ row, column }: Coordinates): Row<T> {\n    const neighbourCoordinates = [\n      // top-left\n      { row: row - 1, column: column - 1 },\n      // top-middle\n      { row: row - 1, column },\n      // top-right\n      { row: row - 1, column: column + 1 },\n      // middle-left\n      { row, column: column - 1 },\n      // middle-right\n      { row, column: column + 1 },\n      // bottom-left\n      { row: row + 1, column: column - 1 },\n      // bottom-middle\n      { row: row + 1, column },\n      // bottom-right\n      { row: row + 1, column: column + 1 }\n    ];\n\n    return neighbourCoordinates.reduce<Row<T>>((acc, cell) => {\n      if (!isOutOfBounds(cell, this._dimensions)) {\n        return [...acc, this.getCell(cell)];\n      }\n      return acc;\n    }, []);\n  }\n\n  public map<U>(fn: (value: T, cell: Cell<T>, self: Grid<T>) => U) {\n    const nextMatrix: Matrix<U> = this._grid.map(cells =>\n      cells.map(cell => ({ ...cell, value: fn(cell.value, cell, this) }))\n    );\n\n    return Grid.from(nextMatrix);\n  }\n}\n","import assoc from \"ramda/es/assoc\";\n\nimport Grid, { Matrix, Cell, Dimensions, FillFn } from \"./Grid\";\n\nexport type TileKind = \"safe\" | \"empty\" | \"mine\";\n\nexport type Tile = {\n  kind: TileKind;\n  revealed: boolean;\n  surroundingMines: number;\n  flagged?: boolean;\n};\n\nexport type GameStatus = \"new\" | \"over\" | \"won\";\n\nexport type Mode = \"reveal\" | \"flag\";\n\nexport const revealTile = (tile: Tile): Tile => assoc(\"revealed\", true, tile);\n\nexport const revealMine = (tile: Tile) =>\n  tile.kind === \"mine\" ? revealTile(tile) : tile;\n\nexport const getNextGrid = (matrix: Matrix<Tile>, cellClicked: Cell<Tile>) => {\n  const nextGrid = Grid.from(matrix);\n\n  const { value: tile } = cellClicked;\n\n  // reveal clicked tile\n  nextGrid.updateCell(cellClicked, revealTile(tile));\n\n  if (tile.kind !== \"safe\") {\n    return nextGrid;\n  }\n\n  nextGrid.getCellNeighbours(cellClicked).forEach(neighbourCell => {\n    const { value: neighbourTile } = neighbourCell;\n\n    // skip revealed tiles\n    if (neighbourTile.revealed) {\n      return;\n    }\n\n    switch (neighbourTile.kind) {\n      case \"empty\":\n        nextGrid.updateCell(neighbourCell, revealTile(neighbourTile));\n        break;\n      case \"safe\":\n        return getNextGrid(nextGrid.snapshot, neighbourCell);\n    }\n  });\n\n  return nextGrid;\n};\n\nexport const isMine = (cell: Cell<Tile>) => cell.value.kind === \"mine\";\n\nexport const makeNewGrid = (dimensions: Dimensions, chanceOfMines: number) => {\n  const fill: FillFn<Tile> = () => ({\n    kind: Math.random() >= chanceOfMines / 100 ? \"mine\" : \"empty\",\n    surroundingMines: 0,\n    revealed: false\n  });\n\n  return Grid.make<Tile>(dimensions, fill).map<Tile>((tile, cell, self) => {\n    if (tile.kind !== \"mine\") {\n      const neighbours = self.getCellNeighbours(cell);\n      const mines = neighbours.filter(isMine);\n      const surroundingMines = mines.length;\n\n      return {\n        ...tile,\n        surroundingMines,\n        kind: surroundingMines ? \"empty\" : \"safe\"\n      };\n    }\n\n    return tile;\n  });\n};\n","import {\n  useState,\n  useEffect,\n  useCallback,\n  Dispatch,\n  SetStateAction,\n  useRef\n} from \"react\";\n\nimport StorageAdapter from \"lib/StorageAdapter\";\n\nconst STORAGE_NAMESPACE = \"@TS-MINES\";\n\nconst storage = new StorageAdapter(STORAGE_NAMESPACE);\n\nexport function useCachedState<T>(\n  cacheKey: string,\n  defaultState: T\n): [T, Dispatch<SetStateAction<T>>] {\n  const [state, setState] = useState(storage.read(defaultState, cacheKey));\n\n  useEffect(() => {\n    storage.persist<T>(state, cacheKey);\n  }, [state, cacheKey]);\n\n  return [state, setState];\n}\n\nexport function useLongPress(callback = () => {}, ms = 300) {\n  const [running, setRunning] = useState(false);\n  const timeoutIdRef = useRef(0);\n\n  const cancelTimeout = useCallback(() => {\n    clearTimeout(timeoutIdRef.current);\n  }, [timeoutIdRef]);\n\n  const start = useCallback(() => {\n    setRunning(true);\n  }, []);\n\n  const stop = useCallback(() => {\n    setRunning(false);\n  }, []);\n\n  useEffect(\n    () => {\n      if (running) {\n        timeoutIdRef.current = setTimeout(callback, ms);\n      } else {\n        cancelTimeout();\n      }\n\n      // cleanup\n      return cancelTimeout;\n    },\n\n    /* \n      Explicitly disable rules of hooks on the next line \n      to prevent the callback from being called multiple times\n    */\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [running]\n  );\n\n  return {\n    onMouseDown: start,\n    onMouseUp: stop,\n    onMouseLeave: stop,\n    onTouchStart: start,\n    onTouchEnd: stop,\n    onMouseMove: cancelTimeout\n  };\n}\n\nexport function useRightClick<T extends () => void>(callback: T) {\n  const onContextMenu = useCallback(\n    (e: MouseEvent) => {\n      e.preventDefault();\n      callback();\n    },\n    [callback]\n  );\n\n  useEffect(() => {\n    window.addEventListener(\"contextmenu\", onContextMenu);\n\n    return () => {\n      window.removeEventListener(\"contextmenu\", onContextMenu);\n    };\n  }, [onContextMenu]);\n}\n","export default class StorageAdapter {\r\n  private namespace = \"\";\r\n\r\n  constructor(namespace: string) {\r\n    this.namespace = namespace;\r\n  }\r\n\r\n  public persist<T extends {}>(value: T, path: string = \"\") {\r\n    localStorage.setItem(\r\n      `${this.namespace}${path}`,\r\n      JSON.stringify(value ?? null)\r\n    );\r\n  }\r\n\r\n  public read<T>(defaultValue: T, path: string = \"\"): T {\r\n    const value = localStorage.getItem(`${this.namespace}${path}`);\r\n\r\n    return value !== null ? JSON.parse(value) : defaultValue;\r\n  }\r\n}\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"defs\", null);\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#dbd9dc\",\n  d: \"M249 0A243 243 0 0017 244v144c0 32 25 58 57 58h42c9 0 16 7 16 16v25c0 14 11 25 25 25h198c14 0 25-11 25-25v-25c0-9 7-16 16-16h42c32 0 57-26 57-58V239C495 105 385-4 249 0z\"\n});\n\nvar _ref4 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#c9c6ca\",\n  d: \"M140 421c-22 0-41-18-41-41V244C99 126 184 24 297 4c-21-4-44-5-67-3A243 243 0 0017 244v144c0 32 25 58 57 58h42c9 0 16 7 16 16v25c0 14 11 25 25 25h25v-50c0-22-19-41-42-41z\"\n});\n\nvar _ref5 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  fill: \"#867e88\"\n}, React.createElement(\"path\", {\n  d: \"M248 365l-26 63c-3 7 4 13 11 11l17-7c4-2 8-2 12 0l17 7c7 2 14-4 11-11l-26-63c-3-7-13-7-16 0z\"\n}), React.createElement(\"circle\", {\n  cx: 148.7,\n  cy: 289,\n  r: 74.3\n}));\n\nvar _ref6 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#6f6571\",\n  d: \"M149 248c35 0 65 24 72 58a74 74 0 10-145 0c8-34 37-58 73-58z\"\n});\n\nvar _ref7 =\n/*#__PURE__*/\nReact.createElement(\"circle\", {\n  cx: 363.4,\n  cy: 289,\n  r: 74.3,\n  fill: \"#867e88\"\n});\n\nvar _ref8 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  fill: \"#6f6571\"\n}, React.createElement(\"path\", {\n  d: \"M363 248c36 0 65 24 73 58a74 74 0 10-145 0c7-34 37-58 72-58zM238 401a49 49 0 0136 0l6 2-16-38c-3-7-13-7-16 0l-16 38 6-2z\"\n}));\n\nvar _ref9 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  fill: \"#c9c6ca\"\n}, React.createElement(\"path\", {\n  d: \"M223 512h-17v-25c0-4 4-8 9-8 4 0 8 4 8 8v25zM306 512h-17v-25c0-4 4-8 8-8 5 0 9 4 9 8v25zM347 512h-17v-25c0-4 4-8 9-8 4 0 8 4 8 8v25zM264 512h-16v-25c0-4 3-8 8-8s8 4 8 8v25z\"\n}));\n\nvar _ref10 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#b7b2b8\",\n  d: \"M182 512h-17v-25c0-4 4-8 8-8 5 0 9 4 9 8v25z\"\n});\n\nvar SvgSkull = function SvgSkull(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 512 512\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9, _ref10);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgSkull, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/skull.29919b5b.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"defs\", null);\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"circle\", {\n  cx: 256,\n  cy: 256,\n  r: 256,\n  fill: \"#ffe17d\"\n});\n\nvar _ref4 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  fill: \"#ffd164\"\n}, React.createElement(\"path\", {\n  d: \"M293 475A256 256 0 0195 57a255 255 0 10360 360c-44 36-101 58-162 58z\"\n}), React.createElement(\"path\", {\n  d: \"M182 512c9 0 16-7 16-17 0-9-7-16-16-16h8c9 0 16-7 16-17 0-9-7-16-16-16h8c9 0 17-7 17-17 0-9-8-16-17-16h91c9 0 17-7 17-17 0-9-8-16-17-16H140c-13 0-24-11-24-25v-49c0-10-8-17-17-17s-16 7-16 17v40c0 11-4 22-11 31l-8 10c-9 11-14 26-14 41v34c0 28 22 50 49 50h83z\"\n}));\n\nvar _ref5 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  fill: \"#ffc350\"\n}, React.createElement(\"path\", {\n  d: \"M198 495H99c-18 0-33-14-33-33v-34c0-11 4-22 11-31l8-10c9-11 14-26 14-41v-57c-9 0-16 7-16 17v40c0 11-4 22-11 31l-8 10c-9 11-14 26-14 41v34c0 28 22 50 49 50h83c9 0 16-7 16-17zM306 396H190a8 8 0 100 17h99c9 0 17-7 17-17zM173 438c0 4 4 8 9 8h16c9 0 17-7 17-17h-33c-5 0-9 4-9 9z\"\n}), React.createElement(\"path\", {\n  d: \"M165 471c0 4 4 8 8 8h17c9 0 16-7 16-17h-33c-4 0-8 4-8 9z\"\n}));\n\nvar _ref6 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  fill: \"#aa7346\"\n}, React.createElement(\"path\", {\n  d: \"M297 341l-4-1c-1-1-58-29-120-30-6 0-10-5-10-11s5-10 10-10c68 2 126 31 129 32a10 10 0 01-5 20zM190 134l-6-2c-2-1-38-29-80-7a10 10 0 01-10-19c55-27 100 8 102 10a10 10 0 01-6 18zM306 151a10 10 0 01-2-21l82-16a10 10 0 114 20l-82 17h-2z\"\n}));\n\nvar _ref7 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#7d5046\",\n  d: \"M152 208c-11-1-19-12-18-23l2-16c1-12 12-20 23-18 11 1 19 11 18 23l-2 16c-1 11-12 19-23 18z\"\n});\n\nvar _ref8 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#9c6846\",\n  d: \"M159 151h-4l-4 28a12 12 0 1025 3l1-8c1-12-7-22-18-23z\"\n});\n\nvar _ref9 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#7d5046\",\n  d: \"M325 226c-11-1-19-12-18-23l2-16c1-12 12-20 23-18 11 1 19 11 18 23l-2 16c-1 11-12 19-23 18z\"\n});\n\nvar _ref10 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#9c6846\",\n  d: \"M332 169h-4l-4 28a12 12 0 1025 3l1-8c1-12-7-22-18-23z\"\n});\n\nvar SvgThinking = function SvgThinking(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 512 512\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9, _ref10);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgThinking, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/thinking.eb8e855e.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"defs\", null);\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"circle\", {\n  cx: 256,\n  cy: 256,\n  r: 256,\n  fill: \"#ffe17d\"\n});\n\nvar _ref4 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  fill: \"#ffd164\"\n}, React.createElement(\"ellipse\", {\n  cx: 156.9,\n  cy: 247.7,\n  rx: 74.3,\n  ry: 66.1\n}), React.createElement(\"ellipse\", {\n  cx: 355.1,\n  cy: 247.7,\n  rx: 74.3,\n  ry: 66.1\n}), React.createElement(\"path\", {\n  d: \"M293 475A256 256 0 0195 57a255 255 0 10360 360c-44 36-101 58-162 58z\"\n}));\n\nvar _ref5 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#5a4650\",\n  d: \"M229 229l-13-10a49 49 0 0180 0l-13 9a33 33 0 00-54 1z\"\n});\n\nvar _ref6 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#6e5a64\",\n  d: \"M157 165c-9 0-18 2-27 5-7 2-14 3-22 3H74c-4 0-8 4-8 9v16c0 5 3 10 7 13l2 2c5 3 8 8 8 14v4c0 37 33 66 74 66s74-29 74-66-33-66-74-66z\"\n});\n\nvar _ref7 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  fill: \"#aa7346\"\n}, React.createElement(\"path\", {\n  d: \"M256 398c-42 0-83-20-107-53a10 10 0 0116-13 113 113 0 00182 0 10 10 0 1116 13c-24 33-64 53-107 53zM182 151h-50a10 10 0 110-21h50a10 10 0 110 21zM380 151h-50a10 10 0 110-21h50a10 10 0 110 21z\"\n}));\n\nvar _ref8 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#5a4650\",\n  d: \"M157 281c-32 0-58-22-58-50 0-27 26-49 58-49s58 22 58 49c0 28-26 50-58 50z\"\n});\n\nvar _ref9 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#84737b\",\n  d: \"M157 206c22 0 41 6 56 14-6-22-29-38-56-38s-50 16-56 38c14-8 34-14 56-14z\"\n});\n\nvar _ref10 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#6e5a64\",\n  d: \"M281 231c0 37 33 66 74 66s74-29 74-66v-4c0-6 3-11 8-14l2-2c4-3 7-8 7-13v-16c0-5-4-9-8-9h-34c-8 0-15-1-22-3-9-3-18-5-27-5-41 0-74 30-74 66z\"\n});\n\nvar _ref11 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#5a4650\",\n  d: \"M297 231c0-27 26-49 58-49s58 22 58 49c0 28-26 50-58 50s-58-22-58-50z\"\n});\n\nvar _ref12 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#84737b\",\n  d: \"M355 206c-22 0-41 6-56 14 6-22 29-38 56-38s50 16 56 38c-14-8-34-14-56-14z\"\n});\n\nvar SvgCool = function SvgCool(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 512 512\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9, _ref10, _ref11, _ref12);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgCool, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/cool.76aceb28.svg\";\nexport { ForwardRef as ReactComponent };","import { keyframes } from \"styled-components\";\nimport { darken } from \"polished\";\n\nexport const colors = {\n  primary: \"#FFD400\",\n  secondary: \"#3482B9\",\n  positive: \"#49C04A\",\n  negative: \"#D03930\",\n  neutral: \"#AAA\",\n  light: \"#ABE0F9\",\n  muted: \"#EAEAEA\",\n  hotpink: \"#FC8BA4\",\n  black: \"#333\",\n  white: \"#FFF\",\n  gray: \"#CCC\",\n  dark: \"#666\",\n  shadow: \"rgba(0, 0, 0, 0.4)\"\n} as const;\n\nexport const radii = {\n  default: \"0.2rem\",\n  sm: \"0.1rem\",\n  md: \"0.2rem\",\n  lg: \"0.3rem\",\n  xl: \"0.4rem\",\n  xxl: \"0.6rem\",\n  xxxl: \"1rem\",\n  round: \"1000px\"\n} as const;\n\nexport const shadows = {\n  default: `0 1px 2px ${colors.shadow}`,\n  inset: `inset 1px 0 2px`,\n  top: `0 -2px 6px ${colors.shadow}`,\n  none: \"none\"\n} as const;\n\nexport const fontFamilies = {\n  display: \"'Black Ops One', monospace\",\n  default: \"'Lato', sans-serif\",\n  voice: \"'Vollkorn', serif\"\n};\n\nconst baseFontSize = 18;\n\nexport const fontSizes = {\n  default: baseFontSize,\n  xs: baseFontSize * 0.6,\n  sm: baseFontSize * 0.8,\n  md: baseFontSize,\n  lg: baseFontSize * 1.2\n} as const;\n\nconst animations = {\n  appear: keyframes`\n    0% {\n      transform: scale(0.1);\n      opacity: 0.1;\n    }\n  `,\n  glow: keyframes`\n    70% {\n      opacity: 1;\n      background-color: ${darken(0.2, colors.negative)};\n    }\n  `\n} as const;\n\nconst theme = {\n  colors,\n  radii,\n  fontSizes,\n  fontFamilies,\n  shadows,\n  animations\n} as const;\n\nexport type Color = keyof typeof colors;\n\nexport type Radius = keyof typeof radii;\n\nexport type FontSize = keyof typeof fontSizes;\n\nexport type FontFamily = keyof typeof fontFamilies;\n\nexport type Theme = typeof theme;\n\nexport default theme;\n","import styled, {\n  css as baseCSS,\n  ThemedCssFunction,\n  ThemedStyledInterface,\n  ThemeProps as BaseThemeProps,\n  // @ts-ignore (ignore while @types/styled-components isn't up to date)\n  useTheme as baseUseTheme\n} from \"styled-components\";\n\nimport { Theme } from \"ui/theme\";\n\nexport type ThemeProps = BaseThemeProps<Theme>;\n\nexport type ThemedProps<P = {}> = ThemeProps & P;\n\nexport const useTheme = baseUseTheme as () => Theme;\n\nexport const getThemeProp = <P extends keyof Theme>(key: P) => <\n  TProps extends ThemeProps = ThemeProps\n>(\n  lens: ((props: TProps) => keyof Theme[P]) | keyof Theme[P]\n) => (props: TProps) => {\n  const $value = typeof lens === \"function\" ? lens(props) : lens;\n\n  return props.theme[key][$value];\n};\n\nexport const getColor = getThemeProp(\"colors\");\nexport const getRadius = getThemeProp(\"radii\");\nexport const getFontSize = getThemeProp(\"fontSizes\");\nexport const getShadow = getThemeProp(\"shadows\");\nexport const getFontFamily = getThemeProp(\"fontFamilies\");\nexport const getAnimation = getThemeProp(\"animations\");\n\nexport const css = baseCSS as ThemedCssFunction<Theme>;\nexport default styled as ThemedStyledInterface<Theme>;\n","import { css } from \"styled-components\";\nimport styled, {\n  getColor,\n  getFontFamily,\n  getShadow,\n  getAnimation\n} from \"ui/styled\";\n\nexport const BOARD_WIDTH = \"1072.16px\";\nexport const BOARD_HEIGHT = \"840.44px\";\n\nexport const APP_BAR_HEIGHT = \"3.8rem\";\nexport const FOOTER_HEIGHT = \"3.8rem\";\nexport const CONTENT_MARGIN = \"1rem\";\n\nexport const Root = styled.div`\n  font-family: ${getFontFamily(\"default\")};\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  font-size: 16px;\n  background: ${getColor(\"muted\")};\n`;\n\nexport const AppBar = styled.header`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: ${APP_BAR_HEIGHT};\n  background: ${getColor(\"black\")};\n  box-shadow: ${getShadow(\"default\")};\n`;\n\nexport const Clamp = styled.div`\n  display: flex;\n  width: calc(${BOARD_WIDTH} - 1rem);\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between;\n  @media screen and (max-width: ${BOARD_WIDTH}) {\n    width: 100vw;\n    padding-left: 0.5rem;\n    padding-right: 0.5rem;\n  }\n`;\n\nexport const Brand = styled.div`\n  font-family: ${getFontFamily(\"display\")};\n  color: ${getColor(\"primary\")};\n  font-size: 2rem;\n  display: flex;\n  flex: 1;\n  text-shadow: 4px 4px 2px rgba(0, 0, 0, 0.9);\n  @media screen and (max-width: 360px) {\n    font-size: 1.5rem;\n  }\n`;\n\nexport const Controls = styled.nav`\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  align-items: flex-end;\n`;\n\nexport const StatusDisplay = styled.div<{ isGameOver: boolean }>`\n  background: ${getColor(\"shadow\")};\n  box-shadow: ${getShadow(\"default\")};\n  border-radius: 50%;\n  width: 4rem;\n  height: 4rem;\n  margin-top: 1rem;\n  padding: 0.5rem;\n  animation: ${p =>\n    p.isGameOver\n      ? css`\n          ${getAnimation(\"glow\")} 4s infinite ease\n        `\n      : \"none\"};\n`;\n\nexport const Content = styled.main`\n  display: flex;\n  max-width: calc(100vw - ${CONTENT_MARGIN});\n  max-height: calc(\n    100vh - ((2 * ${CONTENT_MARGIN}) + ${APP_BAR_HEIGHT} + ${FOOTER_HEIGHT})\n  );\n  margin-top: ${CONTENT_MARGIN};\n  margin-bottom: ${CONTENT_MARGIN};\n  -ms-overflow-style: none;\n  @media screen and (max-height: ${BOARD_HEIGHT}) {\n    overflow: scroll;\n  }\n  @media screen and (max-width: ${BOARD_WIDTH}) {\n    overflow: scroll;\n  }\n`;\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"defs\", null);\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#fc644f\",\n  d: \"M389 271l121 163c-91 30-300 24-381-18V126c80 41 290 49 381 18L389 271z\"\n});\n\nvar _ref4 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#f1543f\",\n  d: \"M129 415l65-32-48-145-17 24z\"\n});\n\nvar _ref5 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#ff7058\",\n  d: \"M41 47v289s75-20 152 46V94C116 27 41 47 41 47z\"\n});\n\nvar _ref6 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#40596b\",\n  d: \"M32 0C16 0 2 13 2 29v483h59V29C61 13 48 0 32 0z\"\n});\n\nvar SvgFlag = function SvgFlag(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 512 512\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3, _ref4, _ref5, _ref6);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgFlag, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/flag.5193edf2.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useMemo } from \"react\";\nimport omit from \"ramda/es/omit\";\n\nimport { Tile } from \"lib/game\";\nimport { useLongPress } from \"lib/hooks\";\n\nimport styled, {\n  getShadow,\n  getRadius,\n  getColor,\n  getAnimation\n} from \"ui/styled\";\n\nimport { ReactComponent as MineIcon } from \"assets/mine.svg\";\nimport { ReactComponent as FlagIcon } from \"assets/flag.svg\";\n\nexport const Mine = styled(MineIcon)`\n  width: 1.4rem;\n  height: 1.4rem;\n  animation: ${getAnimation(\"appear\")} 0.2s ease-in-out;\n`;\n\nexport const Flag = styled(FlagIcon)`\n  width: 1.4rem;\n  height: 1.4rem;\n  animation: ${getAnimation(\"appear\")} 0.2s ease-in-out;\n`;\n\nconst numberColors: Record<number, string> = {\n  0: \"white\",\n  1: \"blue\",\n  2: \"green\",\n  3: \"red\",\n  4: \"darkblue\",\n  5: \"darkgreen\",\n  6: \"darkred\",\n  7: \"purple\",\n  8: \"darkpurple\"\n};\n\ninterface Props extends Tile {\n  onLongPress(): void;\n  onClick(): void;\n  active?: boolean;\n}\n\nconst GridTileContainer = styled.div<Omit<Props, \"onLongPress\">>`\n  width: 1.8rem;\n  height: 1.8rem;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  box-shadow: ${getShadow(props => (props.revealed ? \"none\" : \"default\"))};\n  border-radius: ${getRadius(\"lg\")};\n  margin: 0.2rem;\n  padding: 0.2rem;\n  background: ${getColor(props =>\n    props.revealed\n      ? props.kind === \"mine\" && props.active\n        ? \"negative\"\n        : \"white\"\n      : \"gray\"\n  )};\n  transition: all 0.2s ease-in-out;\n  font-weight: bold;\n  user-select: none;\n  ${props =>\n    // dynamic number-color mapping\n    typeof props.children === \"number\"\n      ? `color:  ${numberColors[props.children]}`\n      : undefined};\n`;\n\nconst GridTile: React.FC<Props> = props => {\n  const content = useMemo(() => {\n    if (props.flagged) {\n      return <Flag />;\n    }\n    if (!props.revealed || props.kind === \"safe\") {\n      return null;\n    }\n\n    switch (props.kind) {\n      case \"empty\":\n        return props.surroundingMines;\n      case \"mine\":\n        return <Mine />;\n    }\n  }, [props]);\n\n  const longPressProps = useLongPress(props.onLongPress, 400);\n\n  return (\n    <GridTileContainer\n      {...omit([\"onLongPress\"], props)}\n      {...longPressProps}\n      active={props.active}\n    >\n      {content}\n    </GridTileContainer>\n  );\n};\n\nexport default GridTile;\n","import React, { useCallback } from \"react\";\n\nimport styled from \"ui/styled\";\nimport { Tile } from \"lib/game\";\nimport { Matrix, Cell } from \"lib/Grid\";\n\nimport GridTile from \"./GridTile\";\n\nexport const GridContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n`;\n\nexport const GridRow = styled.div`\n  display: flex;\n`;\n\ninterface Props {\n  grid: Matrix<Tile>;\n  onTileClick(cell: Cell<Tile>): void;\n  onTileLongPress(cell: Cell<Tile>): void;\n  activeCell?: Cell<Tile>;\n}\n\nconst GridComponent: React.FC<Props> = props => {\n  const handleClick = useCallback(\n    (cell: Cell<Tile>) => () => props.onTileClick(cell),\n    [props]\n  );\n\n  const handleLongPress = useCallback(\n    (cell: Cell<Tile>) => () => props.onTileLongPress(cell),\n    [props]\n  );\n\n  return (\n    <GridContainer>\n      {props.grid.map((row, y) => (\n        <GridRow key={y}>\n          {row.map((cell, x) => (\n            <GridTile\n              key={x}\n              {...cell.value}\n              active={\n                cell.row === props.activeCell?.row &&\n                cell.column === props.activeCell?.column\n              }\n              onClick={handleClick(cell)}\n              onLongPress={handleLongPress(cell)}\n            />\n          ))}\n        </GridRow>\n      ))}\n    </GridContainer>\n  );\n};\n\nexport default GridComponent;\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"defs\", null);\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M256 5a257 257 0 00-81 501c13 3 18-5 18-12l-1-44c-71 16-86-34-86-34-12-30-28-38-28-38-24-16 1-16 1-16 26 2 39 27 39 27 23 39 60 28 75 21 2-16 9-28 16-34-57-7-116-29-116-127 0-28 10-51 26-69-3-7-11-33 3-68 0 0 21-7 70 26a244 244 0 01128 0c49-33 70-26 70-26 14 35 6 61 3 68 16 18 26 41 26 69 0 99-60 120-117 127 10 8 18 23 18 47v71c0 7 4 15 17 12A257 257 0 00256 5z\"\n});\n\nvar SvgGithub = function SvgGithub(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 512 512\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgGithub, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/github.1c80c8c6.svg\";\nexport { ForwardRef as ReactComponent };","import React from \"react\";\n\nimport styled, {\n  getColor,\n  getShadow,\n  getRadius,\n  getAnimation\n} from \"ui/styled\";\n\nimport { ReactComponent as GithubSVG } from \"assets/github.svg\";\n\nexport const GithubIcon = styled(GithubSVG)`\n  height: 2rem;\n  width: 2rem;\n`;\n\nexport const GithubLabel = styled.div`\n  white-space: nowrap;\n  font-size: 0.9rem;\n`;\n\nexport const GithubBadge = styled.a`\n  border-radius: ${getRadius(\"round\")};\n  color: ${getColor(\"secondary\")};\n  background: ${getColor(\"white\")};\n  display: flex;\n  padding: 0.4rem;\n  width: 2.2rem;\n  height: 2.2rem;\n  overflow: hidden;\n  ${GithubLabel} {\n    display: none;\n  }\n  justify-content: space-around;\n  align-items: center;\n  box-shadow: ${getShadow(\"default\")};\n  font-weight: 700;\n  text-decoration: none;\n  :hover {\n    ${GithubLabel} {\n      display: flex;\n      animation: ${getAnimation(\"appear\")} 0.3s ease;\n      padding: 0.4rem;\n    }\n    width: 12rem;\n    border-radius: 2rem;\n  }\n  transition: all 0.3s ease-in-out;\n  user-select: none;\n  outline: none;\n`;\n\nconst Github: React.FC = () => {\n  return (\n    <GithubBadge\n      target=\"_blank\"\n      rel=\"noreferrer\"\n      href=\"https://github.com/alanrsoares/ts-mines\"\n      aria-label=\"got to the project's github page\"\n    >\n      <GithubIcon />\n      <GithubLabel>@alanrsoares/ts-mines</GithubLabel>\n    </GithubBadge>\n  );\n};\n\nexport default Github;\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"defs\", null);\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"circle\", {\n  cx: 256.3,\n  cy: 256,\n  r: 245,\n  fill: \"#fec753\"\n});\n\nvar _ref4 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#35528c\",\n  d: \"M256 105C133 105 30 217 3 248c-4 5-4 11 0 16 27 31 130 143 253 143s226-112 253-143c4-5 4-11 0-16-27-31-130-143-253-143z\"\n});\n\nvar _ref5 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#1f3a60\",\n  d: \"M42 256c0-24 96-151 214-151C134 105 31 215 4 247c-5 5-5 13 0 18 27 32 130 142 252 142-118 0-214-127-214-151z\"\n});\n\nvar _ref6 =\n/*#__PURE__*/\nReact.createElement(\"circle\", {\n  cx: 256,\n  cy: 256,\n  r: 132,\n  fill: \"#99d3ff\"\n});\n\nvar _ref7 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#5bb3ce\",\n  d: \"M176 256c0-64 46-117 106-129a133 133 0 00-158 129 132 132 0 00158 129c-60-12-106-65-106-129z\"\n});\n\nvar _ref8 =\n/*#__PURE__*/\nReact.createElement(\"circle\", {\n  cx: 254.6,\n  cy: 256,\n  r: 65.6,\n  fill: \"#1f3a60\"\n});\n\nvar _ref9 =\n/*#__PURE__*/\nReact.createElement(\"circle\", {\n  cx: 308.1,\n  cy: 225.6,\n  r: 27.9,\n  fill: \"#dcf3ff\"\n});\n\nvar SvgEye = function SvgEye(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 512 512\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgEye, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/eye.a2510f3f.svg\";\nexport { ForwardRef as ReactComponent };","import React from \"react\";\nimport { darken } from \"polished\";\n\nimport { Mode } from \"lib/game\";\n\nimport styled, { getColor, getShadow, getRadius } from \"ui/styled\";\n\nimport { Color } from \"ui/theme\";\nimport { Clamp, FOOTER_HEIGHT } from \"ui/components/core\";\nimport Github from \"ui/components/Github\";\nimport { ReactComponent as EyeIcon } from \"assets/eye.svg\";\nimport { ReactComponent as FlagIcon } from \"assets/flag.svg\";\n\nconst Eye = styled(EyeIcon)`\n  width: 1rem;\n  height: 1rem;\n`;\n\nconst Flag = styled(FlagIcon)`\n  width: 1rem;\n  height: 1rem;\n`;\n\nconst Circle = styled.div<{ active: boolean }>`\n  border-radius: ${getRadius(\"round\")};\n  background-color: ${p =>\n    p.active ? getColor(\"gray\")(p) : darken(0.1, getColor(\"gray\")(p))};\n  width: 1.8rem;\n  height: 1.8rem;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 0.1rem;\n  transition-delay: 0.3s;\n  transition: background-color 0.2s ease-in-out;\n  box-shadow: ${getShadow(p => (p.active ? \"inset\" : \"default\"))};\n`;\n\nexport const Button = styled.button<{\n  color: Color;\n  side: \"left\" | \"right\";\n  active?: boolean;\n}>`\n    border: none;\n    background-color: ${p => {\n      const color = getColor(p.color)(p);\n      return p.active ? color : darken(0.5, color);\n    }};\n    height: 2.8rem;\n    width: 4rem;\n    ${p => `\n      border-top-${p.side}-radius: 2rem;\n      border-bottom-${p.side}-radius: 2rem;\n    `}\n    box-shadow: ${getShadow(p => (p.active ? \"inset\" : \"default\"))};\n    outline: none;\n    transition: all .1s ease;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    transition: all 0.3s ease-in-out;\n  `;\n\nexport const ButtonGroup = styled.div`\n  display: flex;\n`;\n\nexport const Root = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: ${FOOTER_HEIGHT};\n  background: ${getColor(\"dark\")};\n  color: ${getColor(\"white\")};\n  box-shadow: ${getShadow(\"default\")};\n  position: fixed;\n  bottom: 0;\n`;\n\nconst Footer: React.FC<{\n  onToggleGameMode(): void;\n  gameMode: Mode;\n}> = props => {\n  return (\n    <Root>\n      <Clamp>\n        <Github />\n        <ButtonGroup>\n          <Button\n            side=\"left\"\n            color=\"white\"\n            active={props.gameMode === \"flag\"}\n            onClick={props.onToggleGameMode}\n            aria-label=\"Toggle game mode\"\n          >\n            <Circle active={props.gameMode === \"flag\"}>\n              <Flag />\n            </Circle>\n          </Button>\n          <Button\n            side=\"right\"\n            color=\"white\"\n            active={props.gameMode === \"reveal\"}\n            onClick={props.onToggleGameMode}\n            aria-label=\"Toggle game mode\"\n          >\n            <Circle active={props.gameMode === \"reveal\"}>\n              <Eye />\n            </Circle>\n          </Button>\n        </ButtonGroup>\n      </Clamp>\n    </Root>\n  );\n};\n\nexport default Footer;\n","import React from \"react\";\n\nimport styled, { getColor, getRadius } from \"ui/styled\";\n\nimport { ReactComponent as EyeIcon } from \"assets/eye.svg\";\n\nexport const Root = styled.div`\n  display: flex;\n  color: ${getColor(\"primary\")};\n  min-width: 8rem;\n  flex-direction: column;\n  align-items: center;\n  background: ${getColor(\"shadow\")};\n  border-radius: ${getRadius(\"lg\")};\n  height: 3rem;\n  justify-content: space-around;\n  @media screen and (max-width: 360px) {\n    min-width: 6rem;\n  }\n`;\n\nexport const ProgressContainer = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: ${getColor(\"primary\")};\n  font-size: 1.6rem;\n`;\n\nexport const ProgressLine = styled.div<{ progress: number }>`\n  height: 0.3rem;\n  overflow: hidden;\n  border-radius: ${getRadius(\"default\")};\n  width: 80%;\n  align-self: center;\n  background: linear-gradient(\n    to right,\n    ${getColor(\"positive\")} 0%,\n    ${getColor(\"positive\")} ${p => p.progress}%,\n    ${getColor(\"white\")} ${p => p.progress}%,\n    ${getColor(\"white\")} 100%\n  );\n`;\n\nexport const ProgressIcon = styled(EyeIcon)`\n  width: 0.9rem;\n  height: 0.9rem;\n  margin-right: 0.5rem;\n`;\n\nconst Score: React.FC<{ score: number; progress: number }> = props => {\n  return (\n    <Root>\n      <ProgressContainer>\n        <ProgressIcon /> {props.score}\n      </ProgressContainer>\n      <ProgressLine progress={props.progress} />\n    </Root>\n  );\n};\n\nexport default Score;\n","import React, { useCallback, useMemo } from \"react\";\nimport flatten from \"ramda/es/flatten\";\nimport { ThemeProvider } from \"styled-components\";\n\nimport Grid, { Cell, Matrix } from \"lib/Grid\";\nimport * as Game from \"lib/game\";\nimport useUpdateChecker from \"lib/useUpdateChecker\";\nimport { useCachedState, useRightClick } from \"lib/hooks\";\n\nimport { ReactComponent as SkullIcon } from \"assets/skull.svg\";\nimport { ReactComponent as ThinkingIcon } from \"assets/thinking.svg\";\nimport { ReactComponent as CoolIcon } from \"assets/cool.svg\";\n\nimport theme from \"ui/theme\";\n\nimport {\n  Root,\n  AppBar,\n  Brand,\n  StatusDisplay,\n  Content,\n  Clamp,\n  Controls\n} from \"ui/components/core\";\n\nimport GridComponent from \"ui/components/Grid\";\nimport Footer from \"ui/components/Footer\";\nimport Score from \"ui/components/Score\";\n\nconst statusAssets: Record<Game.GameStatus, JSX.Element> = {\n  new: <ThinkingIcon />,\n  won: <CoolIcon />,\n  over: <SkullIcon />\n};\n\nconst NO_OP = () => {};\n\nexport function App() {\n  useUpdateChecker();\n\n  const [score, setScore] = useCachedState<number>(\"/score\", 0);\n\n  const [gameStatus, setGameStatus] = useCachedState<Game.GameStatus>(\n    \"/gameStatus\",\n    \"new\"\n  );\n  const [gameMode, setGameMode] = useCachedState<Game.Mode>(\"/mode\", \"reveal\");\n\n  const [activeCell, setActiveCell] = useCachedState<\n    Cell<Game.Tile> | undefined\n  >(\"/activeCell\", undefined);\n\n  const [grid, setGrid] = useCachedState<Matrix<Game.Tile>>(\n    \"/grid\",\n    Game.makeNewGrid({ rows: 20, columns: 30 }, 80).snapshot\n  );\n\n  const handleCellClick = useCallback(\n    (cell: Cell<Game.Tile>, mode?: Game.Mode) => {\n      if (gameStatus === \"over\" || gameStatus === \"won\") {\n        return;\n      }\n\n      setActiveCell(cell);\n\n      const tile = cell.value;\n\n      const $mode = mode ?? gameMode;\n\n      switch ($mode) {\n        case \"flag\":\n          {\n            // ignore clicking on a \"revealed\" tile while on \"flag\" mode\n            if (tile.revealed) {\n              return;\n            }\n            const nextGrid = Grid.from(grid).updateCell(cell, {\n              ...tile,\n              flagged: !tile.flagged\n            });\n            setGrid(nextGrid.snapshot);\n          }\n          break;\n        case \"reveal\":\n          {\n            // ignore clicking on a \"flagged\" tile while on \"reveal\" mode\n            if (tile.flagged) {\n              return;\n            }\n\n            if (tile.kind === \"mine\") {\n              // reveal mines\n              const nextGrid = Grid.from(grid).updateCell(cell, {\n                ...tile,\n                revealed: true\n              });\n\n              setGrid(nextGrid.snapshot);\n\n              setGrid(nextGrid.map(Game.revealMine).snapshot);\n              setGameStatus(\"over\");\n              return;\n            }\n\n            const nextGrid = Game.getNextGrid(grid, cell).snapshot;\n            const nextScore = flatten(nextGrid).filter(c => c.value.revealed)\n              .length;\n\n            setGrid(nextGrid);\n            setScore(nextScore);\n          }\n          break;\n      }\n    },\n    [\n      grid,\n      gameStatus,\n      gameMode,\n      setGrid,\n      setScore,\n      setActiveCell,\n      setGameStatus\n    ]\n  );\n\n  const handleCellLongPress = useCallback(\n    (cell: Cell<Game.Tile>) => {\n      handleCellClick(cell, \"flag\");\n    },\n    [handleCellClick]\n  );\n\n  const handleStatusClick = useCallback(() => {\n    if (gameStatus === \"over\") {\n      setGrid(Game.makeNewGrid({ rows: 20, columns: 30 }, 80).snapshot);\n      setGameStatus(\"new\");\n      setScore(0);\n    }\n  }, [gameStatus, setGameStatus, setScore, setGrid]);\n\n  const handleToggleGameMode = useCallback(() => {\n    setGameMode(mode => (mode === \"flag\" ? \"reveal\" : \"flag\"));\n  }, [setGameMode]);\n\n  useRightClick(NO_OP);\n\n  const progress = useMemo(\n    () => (score / (grid.length * grid[0].length)) * 100,\n    [score, grid]\n  );\n\n  return (\n    <Root>\n      <AppBar>\n        <Clamp>\n          <Brand>[MINES]</Brand>\n          <StatusDisplay\n            isGameOver={gameStatus === \"over\"}\n            onClick={handleStatusClick}\n          >\n            {statusAssets[gameStatus]}\n          </StatusDisplay>\n          <Controls>\n            <Score score={score} progress={progress} />\n          </Controls>\n        </Clamp>\n      </AppBar>\n      <Content>\n        <GridComponent\n          grid={grid}\n          activeCell={activeCell}\n          onTileClick={handleCellClick}\n          onTileLongPress={handleCellLongPress}\n        />\n      </Content>\n      <Footer onToggleGameMode={handleToggleGameMode} gameMode={gameMode} />\n    </Root>\n  );\n}\n\nexport default function() {\n  return (\n    <ThemeProvider theme={theme}>\n      <App />\n    </ThemeProvider>\n  );\n}\n","import { useEffect } from \"react\";\n\nexport function semverGreaterThan(\n  latestVersion: string,\n  currentVersion: string\n) {\n  const latestParts = latestVersion.split(/\\./g);\n  const currentParts = currentVersion.split(/\\./g);\n\n  while (latestParts.length || currentParts.length) {\n    const a = Number(latestParts.shift());\n    const b = Number(currentParts.shift());\n\n    if (a === b) {\n      continue;\n    }\n\n    return a > b || isNaN(b);\n  }\n\n  return false;\n}\n\n/**\n * Wraps fetch with a concurrent timeout-based callback\n *\n * @param {number} timeout  - timeout in milliseconds\n * @param {Function} [onTimeout] - timeout callback\n */\nexport const fetchWithTimeout = (\n  timeout: number,\n  onTimeout: () => void = () => {\n    throw new Error(\"Timeout exceeded\");\n  }\n) => async (url: string) => {\n  // this forces a 5s timeout in case the request hangs\n  const timeoutHandle = window.setTimeout(onTimeout, timeout);\n  const response = await fetch(url);\n  // cancels the timeout once the request is resolved\n  window.clearTimeout(timeoutHandle);\n  return response;\n};\n\nexport async function purgeCache() {\n  if (window.caches) {\n    const keys = await window.caches.keys();\n    const deleteKeys = keys.map(key => window.caches.delete(key));\n\n    await Promise.all(deleteKeys);\n  }\n}\n\nexport async function checkForAppUpdates() {\n  const onTimeout = () => {\n    throw new Error(\"Timout reached while fetching meta.json\");\n  };\n\n  const fetchWithTimeoutHandler = fetchWithTimeout(5000, onTimeout);\n\n  const response = await fetchWithTimeoutHandler(`meta.json?t=${Date.now()}`);\n  const meta = await response.json();\n  const latestVersion = meta.version;\n  const currentVersion = global.appVersion;\n\n  return semverGreaterThan(latestVersion, currentVersion);\n}\n\n/**\n * Forces window to reload\n */\nexport function forceReload() {\n  window.location.reload(true);\n}\n\nexport async function tryInstallUpdate() {\n  try {\n    await purgeCache();\n    window.setTimeout(forceReload, 300);\n  } catch (error) {\n    console.log(\"Failed to purge cache\", error);\n  }\n}\n\nexport async function tryCheckForUpdates() {\n  try {\n    const hasUpdates = await checkForAppUpdates();\n    if (\n      hasUpdates &&\n      window.confirm(\"A new version is available, would you like to update?\")\n    ) {\n      await tryInstallUpdate();\n    }\n  } catch (error) {\n    console.log(`Failed to check for updates:`, error);\n  }\n}\n\nconst UPDATE_CHECK_INTERVAL = 60000 * 30;\n\nexport default function useUpdateChecker(interval = UPDATE_CHECK_INTERVAL) {\n  useEffect(() => {\n    tryCheckForUpdates();\n    const intervalId = window.setInterval(tryCheckForUpdates, interval);\n\n    return () => {\n      window.clearInterval(intervalId);\n    };\n  }, [interval]);\n}\n"],"sourceRoot":""}