{"version":3,"sources":["ui/theme.ts","lib/useUpdateChecker.ts","registerServiceWorker.ts","lib/Grid.ts","lib/game.ts","lib/StorageAdapter.ts","assets/skull.svg","assets/thinking.svg","assets/cool.svg","ui/styled.ts","assets/eye.svg","ui/components/core.ts","assets/mine.svg","assets/flag.svg","ui/components/GridTile.tsx","ui/components/Grid.tsx","assets/github.svg","ui/components/Github.tsx","ui/components/Footer.tsx","App.tsx","index.tsx"],"names":["colors","primary","secondary","positive","negative","neutral","light","muted","hotpink","black","white","gray","dark","shadow","theme","radii","default","sm","md","lg","xl","xxl","xxxl","round","fontSizes","xs","baseFontSize","fontFamilies","display","voice","shadows","inset","top","none","animations","appear","keyframes","glow","darken","semverGreaterThan","latestVersion","currentVersion","latestParts","split","currentParts","length","a","Number","shift","b","isNaN","fetchWithTimeout","timeout","onTimeout","Error","url","timeoutHandle","window","setTimeout","fetch","response","clearTimeout","purgeCache","caches","keys","deleteKeys","map","key","delete","Promise","all","checkForAppUpdates","fetchWithTimeoutHandler","Date","now","json","meta","version","global","appVersion","forceReload","location","reload","tryInstallUpdate","console","log","tryCheckForUpdates","confirm","useUpdateChecker","interval","useEffect","intervalId","setInterval","clearInterval","isLocalhost","Boolean","hostname","match","register","navigator","URL","process","toString","origin","addEventListener","swUrl","then","status","headers","get","indexOf","serviceWorker","ready","registration","unregister","registerValidSW","catch","checkValidServiceWorker","onupdatefound","installingWorker","installing","onstatechange","state","controller","error","isIndexOutOfBounds","value","gridSize","min","max","isBetween","isOutOfBounds","cell","dimensions","row","rows","column","columns","Grid","fill","_dimensions","_grid","y","x","push","this","matrix","previous","getCell","filter","fn","nextMatrix","cells","from","slice","make","undefined","withSeed","revealTile","tile","assoc","revealMine","kind","isMine","makeNewGrid","chanceOfMines","Math","random","surroundingMines","revealed","self","getCellNeighbours","path","localStorage","setItem","JSON","stringify","defaultValue","getItem","parse","_extends","Object","assign","target","i","arguments","source","prototype","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","sourceKeys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_ref2","createElement","_ref3","d","_ref4","_ref5","cx","cy","r","_ref6","_ref7","_ref8","_ref9","_ref10","_ref","svgRef","title","props","viewBox","ref","ForwardRef","forwardRef","rx","ry","_ref11","_ref12","getThemeProp","baseUseTheme","lens","$value","getColor","getRadius","getShadow","getFontFamily","getAnimation","styled","baseCSS","Root","div","AppBar","Clamp","Brand","between","Controls","StatusDisplay","p","isGameOver","css","Content","Progress","ProgressContainer","ProgressLine","progress","ProgressIcon","EyeIcon","Mine","MineIcon","Flag","FlagIcon","numberColors","0","1","2","3","4","5","6","7","8","GridTileContainer","active","children","GridTile","content","useMemo","flagged","onClick","GridContainer","GridRow","GridComponent","handleCellClick","useCallback","onTileClick","grid","activeCell","GithubIcon","GithubSVG","GithubLabel","GithubBadge","Github","rel","href","aria-label","Eye","Circle","Button","button","color","side","ButtonGroup","Footer","gameMode","onToggleGameMode","statusAssets","new","won","over","App","useState","Storage","score","setScore","gameStatus","setGameStatus","setGameMode","setActiveCell","Game","snapshot","setGrid","nextGrid","updateCell","getNextGrid","cellClicked","forEach","neighbourCell","neighbourTile","nextScore","flatten","c","handleStatusClick","handleToggleGameMode","mode","onKeyUp","e","preventDefault","keyCode","document","removeEventListener","rootElement","getElementById","app","render","registerServiceWorker"],"mappings":"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","file":"static/js/main.7542fb4b.chunk.js","sourcesContent":["import { keyframes } from \"styled-components\";\nimport { darken } from \"polished\";\n\nexport const colors = {\n  primary: \"#FFD400\",\n  secondary: \"#3482B9\",\n  positive: \"#49C04A\",\n  negative: \"#D03930\",\n  neutral: \"#AAA\",\n  light: \"#ABE0F9\",\n  muted: \"#EAEAEA\",\n  hotpink: \"#FC8BA4\",\n  black: \"#333\",\n  white: \"#FFF\",\n  gray: \"#CCC\",\n  dark: \"#666\",\n  shadow: \"rgba(0, 0, 0, 0.4)\"\n} as const;\n\nexport const radii = {\n  default: \"0.2em\",\n  sm: \"0.1em\",\n  md: \"0.2em\",\n  lg: \"0.3em\",\n  xl: \"0.4em\",\n  xxl: \"0.6em\",\n  xxxl: \"1em\",\n  round: \"50%\"\n} as const;\n\nexport const shadows = {\n  default: `0 1px 2px ${colors.shadow}`,\n  inset: `inset 1px 0 2px`,\n  top: `0 -2px 6px ${colors.shadow}`,\n  none: \"none\"\n} as const;\n\nexport const fontFamilies = {\n  display: \"'Black Ops One', cursive\",\n  default: \"'Lato', sans-serif\",\n  voice: \"'Vollkorn', serif\"\n};\n\nconst baseFontSize = 18;\n\nexport const fontSizes = {\n  default: baseFontSize,\n  xs: baseFontSize * 0.6,\n  sm: baseFontSize * 0.8,\n  md: baseFontSize,\n  lg: baseFontSize * 1.2\n} as const;\n\nconst animations = {\n  appear: keyframes`\n    0% {\n      transform: scale(0.1);\n      opacity: 0.1;\n    }\n  `,\n  glow: keyframes`\n    70% {\n      opacity: 1;\n      background-color: ${darken(0.2, colors.negative)};\n    }\n  `\n} as const;\n\nconst theme = {\n  colors,\n  radii,\n  fontSizes,\n  fontFamilies,\n  shadows,\n  animations\n} as const;\n\nexport type Color = keyof typeof colors;\n\nexport type Radius = keyof typeof radii;\n\nexport type FontSize = keyof typeof fontSizes;\n\nexport type FontFamily = keyof typeof fontFamilies;\n\nexport type Theme = typeof theme;\n\nexport default theme;\n","import { useEffect } from \"react\";\n\nexport function semverGreaterThan(\n  latestVersion: string,\n  currentVersion: string\n) {\n  const latestParts = latestVersion.split(/\\./g);\n  const currentParts = currentVersion.split(/\\./g);\n\n  while (latestParts.length || currentParts.length) {\n    const a = Number(latestParts.shift());\n    const b = Number(currentParts.shift());\n\n    if (a === b) {\n      continue;\n    }\n\n    return a > b || isNaN(b);\n  }\n\n  return false;\n}\n\n/**\n * Wraps fetch with a concurrent timeout-based callback\n *\n * @param {number} timeout  - timeout in milliseconds\n * @param {Function} [onTimeout] - timeout callback\n */\nexport const fetchWithTimeout = (\n  timeout: number,\n  onTimeout: () => void = () => {\n    throw new Error(\"Timeout exceeded\");\n  }\n) => async (url: string) => {\n  // this forces a 5s timeout in case the request hangs\n  const timeoutHandle = window.setTimeout(onTimeout, timeout);\n  const response = await fetch(url);\n  // cancels the timeout once the request is resolved\n  window.clearTimeout(timeoutHandle);\n  return response;\n};\n\nexport async function purgeCache() {\n  if (window.caches) {\n    const keys = await window.caches.keys();\n    const deleteKeys = keys.map(key => window.caches.delete(key));\n\n    await Promise.all(deleteKeys);\n  }\n}\n\nexport async function checkForAppUpdates() {\n  const onTimeout = () => {\n    throw new Error(\"Timout reached while fetching meta.json\");\n  };\n\n  const fetchWithTimeoutHandler = fetchWithTimeout(5000, onTimeout);\n\n  const response = await fetchWithTimeoutHandler(`meta.json?t=${Date.now()}`);\n  const meta = await response.json();\n  const latestVersion = meta.version;\n  const currentVersion = global.appVersion;\n\n  return semverGreaterThan(latestVersion, currentVersion);\n}\n\n/**\n * Forces window to reload\n */\nexport function forceReload() {\n  window.location.reload(true);\n}\n\nexport async function tryInstallUpdate() {\n  try {\n    await purgeCache();\n    window.setTimeout(forceReload, 300);\n  } catch (error) {\n    console.log(\"Failed to purge cache\", error);\n  }\n}\n\nexport async function tryCheckForUpdates() {\n  try {\n    const hasUpdates = await checkForAppUpdates();\n    if (\n      hasUpdates &&\n      window.confirm(\"A new version is available, would you like to update?\")\n    ) {\n      await tryInstallUpdate();\n    }\n  } catch (error) {\n    console.log(`Failed to check for updates:`, error);\n  }\n}\n\nconst UPDATE_CHECK_INTERVAL = 60000 * 30;\n\nexport default function useUpdateChecker(interval = UPDATE_CHECK_INTERVAL) {\n  useEffect(() => {\n    tryCheckForUpdates();\n    const intervalId = window.setInterval(tryCheckForUpdates, interval);\n\n    return () => {\n      window.clearInterval(intervalId);\n    };\n  }, [interval]);\n}\n","// tslint:disable:no-console\r\n// In production, we register a service worker to serve assets from local cache.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on the 'N+1' visit to a page, since previously\r\n// cached resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\r\n// This link also includes instructions on opting out of this behavior.\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === \"localhost\" ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === \"[::1]\" ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport default function register() {\r\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(\r\n      process.env.PUBLIC_URL!,\r\n      window.location.toString()\r\n    );\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener(\"load\", () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Lets check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            \"This web app is being served cache-first by a service \" +\r\n              \"worker. To learn more, visit https://goo.gl/SC7cgQ\"\r\n          );\r\n        });\r\n      } else {\r\n        // Is not local host. Just register service worker\r\n        registerValidSW(swUrl);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker) {\r\n          installingWorker.onstatechange = () => {\r\n            if (installingWorker.state === \"installed\") {\r\n              if (navigator.serviceWorker.controller) {\r\n                // At this point, the old content will have been purged and\r\n                // the fresh content will have been added to the cache.\r\n                // It's the perfect time to display a 'New content is\r\n                // available; please refresh.' message in your web app.\r\n                console.log(\"New content is available; please refresh.\");\r\n              } else {\r\n                // At this point, everything has been precached.\r\n                // It's the perfect time to display a\r\n                // 'Content is cached for offline use.' message.\r\n                console.log(\"Content is cached for offline use.\");\r\n              }\r\n            }\r\n          };\r\n        }\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error(\"Error during service worker registration:\", error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      if (\r\n        response.status === 404 ||\r\n        response.headers.get(\"content-type\")!.indexOf(\"javascript\") === -1\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        \"No internet connection found. App is running in offline mode.\"\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if (\"serviceWorker\" in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","export interface Coordinates {\n  row: number;\n  column: number;\n}\n\nexport interface Dimensions {\n  rows: number;\n  columns: number;\n}\n\nexport type FillFn<T> = (cell: Coordinates, previousValue?: T) => T;\n\nexport interface Cell<T> extends Coordinates {\n  value: T;\n}\n\nexport type Row<T> = Cell<T>[];\n\nexport type Matrix<T> = Row<T>[];\n\nconst isBetween = (min: number, max: number, value: number) =>\n  value >= min && value < max;\n\nconst isIndexOutOfBounds = (value: number, gridSize: number) =>\n  !isBetween(0, gridSize, value);\n\nconst isOutOfBounds = (\n  cell: { row: number; column: number },\n  dimensions: Dimensions\n) =>\n  isIndexOutOfBounds(cell.row, dimensions.rows) ||\n  isIndexOutOfBounds(cell.column, dimensions.columns);\n\nexport default class Grid<T = undefined> {\n  private _dimensions: Dimensions = {\n    rows: 0,\n    columns: 0\n  };\n  private _grid: Matrix<T> = [];\n\n  constructor(dimensions: Dimensions, fill: FillFn<T> | T) {\n    const rows: Matrix<T> = [];\n\n    for (let y = 0; y < dimensions.rows; y++) {\n      const row: Row<T> = [];\n\n      for (let x = 0; x < dimensions.columns; x++) {\n        const value =\n          typeof fill === \"function\"\n            ? (fill as FillFn<T>)({\n                row: y,\n                column: x\n              })\n            : fill;\n\n        row.push({ row: y, column: x, value });\n      }\n\n      rows.push(row);\n    }\n\n    this._dimensions = dimensions;\n    this._grid = rows;\n\n    return this;\n  }\n\n  public static make<T>(dimensions: Dimensions, fill: FillFn<T> | T): Grid<T> {\n    return new Grid(dimensions, fill);\n  }\n\n  public static from<U>(matrix: Matrix<U>) {\n    const rows = matrix.length;\n    const columns = matrix[0].length;\n\n    return Grid.make<U>({ rows, columns }, (undefined as any) as U).withSeed(\n      matrix\n    );\n  }\n\n  public withSeed(matrix: Matrix<T>) {\n    this._grid = matrix;\n\n    return this;\n  }\n\n  public get snapshot() {\n    return this._grid.slice();\n  }\n\n  public updateCell(\n    { row, column }: Coordinates,\n    fill: FillFn<T> | T\n  ): Grid<T> {\n    const previous = this.getCell({ row, column });\n\n    const value =\n      typeof fill === \"function\"\n        ? (fill as FillFn<T>)({ row, column }, previous.value)\n        : fill;\n\n    this._grid[row][column] = { row, column, value };\n\n    return this;\n  }\n\n  public getCell({ row, column }: Coordinates) {\n    if (!isOutOfBounds({ row, column }, this._dimensions)) {\n      return this._grid[row][column];\n    }\n\n    throw new Error(`Invalid cell coordinates: row: ${row}; column: ${column}`);\n  }\n\n  public getCellNeighbours({ row, column }: Coordinates): Row<T> {\n    const neighbourCoordinates = [\n      // top-left\n      { row: row - 1, column: column - 1 },\n      // top-middle\n      { row: row - 1, column },\n      // top-right\n      { row: row - 1, column: column + 1 },\n      // middle-left\n      { row, column: column - 1 },\n      // middle-right\n      { row, column: column + 1 },\n      // bottom-left\n      { row: row + 1, column: column - 1 },\n      // bottom-middle\n      { row: row + 1, column },\n      // bottom-right\n      { row: row + 1, column: column + 1 }\n    ];\n\n    return neighbourCoordinates\n      .filter(cell => !isOutOfBounds(cell, this._dimensions))\n      .map(cell => this.getCell(cell));\n  }\n\n  public map<U>(fn: (value: T, cell: Cell<T>, self: Grid<T>) => U) {\n    const nextMatrix: Matrix<U> = this._grid.map(cells =>\n      cells.map(cell => ({ ...cell, value: fn(cell.value, cell, this) }))\n    );\n\n    return Grid.from(nextMatrix);\n  }\n\n  public filter(fn: (value: T, cell: Cell<T>, self: Grid<T>) => boolean) {\n    const nextMatrix: Matrix<T> = this._grid.map(cells =>\n      cells.filter(cell => fn(cell.value, cell, this))\n    );\n\n    return Grid.from(nextMatrix);\n  }\n}\n","import assoc from \"ramda/es/assoc\";\n\nimport Grid, { Matrix, Cell, Dimensions, FillFn } from \"./Grid\";\n\nexport type TileKind = \"safe\" | \"empty\" | \"mine\";\n\nexport type Tile = {\n  kind: TileKind;\n  revealed: boolean;\n  surroundingMines: number;\n  flagged?: boolean;\n};\n\nexport type GameStatus = \"new\" | \"over\" | \"won\";\n\nexport type Mode = \"reveal\" | \"flag\";\n\nexport const revealTile = (tile: Tile): Tile => assoc(\"revealed\", true, tile);\n\nexport const revealMine = (tile: Tile) =>\n  tile.kind === \"mine\" ? revealTile(tile) : tile;\n\nexport const getNextGrid = (matrix: Matrix<Tile>, cellClicked: Cell<Tile>) => {\n  const nextGrid = Grid.from(matrix);\n\n  const { value: tile } = cellClicked;\n\n  // reveal clicked tile\n  nextGrid.updateCell(cellClicked, revealTile(tile));\n\n  if (tile.kind !== \"safe\") {\n    return nextGrid;\n  }\n\n  nextGrid.getCellNeighbours(cellClicked).forEach(neighbourCell => {\n    const { value: neighbourTile } = neighbourCell;\n\n    // skip revealed tiles\n    if (neighbourTile.revealed) {\n      return;\n    }\n\n    switch (neighbourTile.kind) {\n      case \"empty\":\n        nextGrid.updateCell(neighbourCell, revealTile(neighbourTile));\n        break;\n      case \"safe\":\n        return getNextGrid(nextGrid.snapshot, neighbourCell);\n    }\n  });\n\n  return nextGrid;\n};\n\nexport const isMine = (cell: Cell<Tile>) => cell.value.kind === \"mine\";\n\nexport const makeNewGrid = (dimensions: Dimensions, chanceOfMines: number) => {\n  const fill: FillFn<Tile> = () => ({\n    kind: Math.random() >= chanceOfMines / 100 ? \"mine\" : \"empty\",\n    surroundingMines: 0,\n    revealed: false\n  });\n\n  return Grid.make<Tile>(dimensions, fill).map<Tile>((tile, cell, self) => {\n    if (tile.kind !== \"mine\") {\n      const neighbours = self.getCellNeighbours(cell);\n      const mines = neighbours.filter(isMine);\n      const surroundingMines = mines.length;\n\n      return {\n        ...tile,\n        surroundingMines,\n        kind: surroundingMines ? \"empty\" : \"safe\"\n      };\n    }\n\n    return tile;\n  });\n};\n","const LS_KEY = \"@MINES\";\r\n\r\nexport default {\r\n  persist<T extends {}>(value: T, path: string = \"\") {\r\n    const key = `${LS_KEY}${path}`;\r\n\r\n    localStorage.setItem(key, JSON.stringify(value));\r\n  },\r\n  read<T>(defaultValue: T, path: string = \"\"): T {\r\n    const key = `${LS_KEY}${path}`;\r\n    const value = localStorage.getItem(key);\r\n\r\n    return value !== null ? JSON.parse(value) : defaultValue;\r\n  }\r\n};\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"defs\", null);\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#dbd9dc\",\n  d: \"M249 0A243 243 0 0017 244v144c0 32 25 58 57 58h42c9 0 16 7 16 16v25c0 14 11 25 25 25h198c14 0 25-11 25-25v-25c0-9 7-16 16-16h42c32 0 57-26 57-58V239C495 105 385-4 249 0z\"\n});\n\nvar _ref4 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#c9c6ca\",\n  d: \"M140 421c-22 0-41-18-41-41V244C99 126 184 24 297 4c-21-4-44-5-67-3A243 243 0 0017 244v144c0 32 25 58 57 58h42c9 0 16 7 16 16v25c0 14 11 25 25 25h25v-50c0-22-19-41-42-41z\"\n});\n\nvar _ref5 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  fill: \"#867e88\"\n}, React.createElement(\"path\", {\n  d: \"M248 365l-26 63c-3 7 4 13 11 11l17-7c4-2 8-2 12 0l17 7c7 2 14-4 11-11l-26-63c-3-7-13-7-16 0z\"\n}), React.createElement(\"circle\", {\n  cx: 148.7,\n  cy: 289,\n  r: 74.3\n}));\n\nvar _ref6 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#6f6571\",\n  d: \"M149 248c35 0 65 24 72 58a74 74 0 10-145 0c8-34 37-58 73-58z\"\n});\n\nvar _ref7 =\n/*#__PURE__*/\nReact.createElement(\"circle\", {\n  cx: 363.4,\n  cy: 289,\n  r: 74.3,\n  fill: \"#867e88\"\n});\n\nvar _ref8 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  fill: \"#6f6571\"\n}, React.createElement(\"path\", {\n  d: \"M363 248c36 0 65 24 73 58a74 74 0 10-145 0c7-34 37-58 72-58zM238 401a49 49 0 0136 0l6 2-16-38c-3-7-13-7-16 0l-16 38 6-2z\"\n}));\n\nvar _ref9 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  fill: \"#c9c6ca\"\n}, React.createElement(\"path\", {\n  d: \"M223 512h-17v-25c0-4 4-8 9-8 4 0 8 4 8 8v25zM306 512h-17v-25c0-4 4-8 8-8 5 0 9 4 9 8v25zM347 512h-17v-25c0-4 4-8 9-8 4 0 8 4 8 8v25zM264 512h-16v-25c0-4 3-8 8-8s8 4 8 8v25z\"\n}));\n\nvar _ref10 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#b7b2b8\",\n  d: \"M182 512h-17v-25c0-4 4-8 8-8 5 0 9 4 9 8v25z\"\n});\n\nvar SvgSkull = function SvgSkull(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 512 512\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9, _ref10);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgSkull, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/skull.29919b5b.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"defs\", null);\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"circle\", {\n  cx: 256,\n  cy: 256,\n  r: 256,\n  fill: \"#ffe17d\"\n});\n\nvar _ref4 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  fill: \"#ffd164\"\n}, React.createElement(\"path\", {\n  d: \"M293 475A256 256 0 0195 57a255 255 0 10360 360c-44 36-101 58-162 58z\"\n}), React.createElement(\"path\", {\n  d: \"M182 512c9 0 16-7 16-17 0-9-7-16-16-16h8c9 0 16-7 16-17 0-9-7-16-16-16h8c9 0 17-7 17-17 0-9-8-16-17-16h91c9 0 17-7 17-17 0-9-8-16-17-16H140c-13 0-24-11-24-25v-49c0-10-8-17-17-17s-16 7-16 17v40c0 11-4 22-11 31l-8 10c-9 11-14 26-14 41v34c0 28 22 50 49 50h83z\"\n}));\n\nvar _ref5 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  fill: \"#ffc350\"\n}, React.createElement(\"path\", {\n  d: \"M198 495H99c-18 0-33-14-33-33v-34c0-11 4-22 11-31l8-10c9-11 14-26 14-41v-57c-9 0-16 7-16 17v40c0 11-4 22-11 31l-8 10c-9 11-14 26-14 41v34c0 28 22 50 49 50h83c9 0 16-7 16-17zM306 396H190a8 8 0 100 17h99c9 0 17-7 17-17zM173 438c0 4 4 8 9 8h16c9 0 17-7 17-17h-33c-5 0-9 4-9 9z\"\n}), React.createElement(\"path\", {\n  d: \"M165 471c0 4 4 8 8 8h17c9 0 16-7 16-17h-33c-4 0-8 4-8 9z\"\n}));\n\nvar _ref6 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  fill: \"#aa7346\"\n}, React.createElement(\"path\", {\n  d: \"M297 341l-4-1c-1-1-58-29-120-30-6 0-10-5-10-11s5-10 10-10c68 2 126 31 129 32a10 10 0 01-5 20zM190 134l-6-2c-2-1-38-29-80-7a10 10 0 01-10-19c55-27 100 8 102 10a10 10 0 01-6 18zM306 151a10 10 0 01-2-21l82-16a10 10 0 114 20l-82 17h-2z\"\n}));\n\nvar _ref7 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#7d5046\",\n  d: \"M152 208c-11-1-19-12-18-23l2-16c1-12 12-20 23-18 11 1 19 11 18 23l-2 16c-1 11-12 19-23 18z\"\n});\n\nvar _ref8 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#9c6846\",\n  d: \"M159 151h-4l-4 28a12 12 0 1025 3l1-8c1-12-7-22-18-23z\"\n});\n\nvar _ref9 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#7d5046\",\n  d: \"M325 226c-11-1-19-12-18-23l2-16c1-12 12-20 23-18 11 1 19 11 18 23l-2 16c-1 11-12 19-23 18z\"\n});\n\nvar _ref10 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#9c6846\",\n  d: \"M332 169h-4l-4 28a12 12 0 1025 3l1-8c1-12-7-22-18-23z\"\n});\n\nvar SvgThinking = function SvgThinking(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 512 512\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9, _ref10);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgThinking, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/thinking.eb8e855e.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"defs\", null);\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"circle\", {\n  cx: 256,\n  cy: 256,\n  r: 256,\n  fill: \"#ffe17d\"\n});\n\nvar _ref4 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  fill: \"#ffd164\"\n}, React.createElement(\"ellipse\", {\n  cx: 156.9,\n  cy: 247.7,\n  rx: 74.3,\n  ry: 66.1\n}), React.createElement(\"ellipse\", {\n  cx: 355.1,\n  cy: 247.7,\n  rx: 74.3,\n  ry: 66.1\n}), React.createElement(\"path\", {\n  d: \"M293 475A256 256 0 0195 57a255 255 0 10360 360c-44 36-101 58-162 58z\"\n}));\n\nvar _ref5 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#5a4650\",\n  d: \"M229 229l-13-10a49 49 0 0180 0l-13 9a33 33 0 00-54 1z\"\n});\n\nvar _ref6 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#6e5a64\",\n  d: \"M157 165c-9 0-18 2-27 5-7 2-14 3-22 3H74c-4 0-8 4-8 9v16c0 5 3 10 7 13l2 2c5 3 8 8 8 14v4c0 37 33 66 74 66s74-29 74-66-33-66-74-66z\"\n});\n\nvar _ref7 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  fill: \"#aa7346\"\n}, React.createElement(\"path\", {\n  d: \"M256 398c-42 0-83-20-107-53a10 10 0 0116-13 113 113 0 00182 0 10 10 0 1116 13c-24 33-64 53-107 53zM182 151h-50a10 10 0 110-21h50a10 10 0 110 21zM380 151h-50a10 10 0 110-21h50a10 10 0 110 21z\"\n}));\n\nvar _ref8 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#5a4650\",\n  d: \"M157 281c-32 0-58-22-58-50 0-27 26-49 58-49s58 22 58 49c0 28-26 50-58 50z\"\n});\n\nvar _ref9 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#84737b\",\n  d: \"M157 206c22 0 41 6 56 14-6-22-29-38-56-38s-50 16-56 38c14-8 34-14 56-14z\"\n});\n\nvar _ref10 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#6e5a64\",\n  d: \"M281 231c0 37 33 66 74 66s74-29 74-66v-4c0-6 3-11 8-14l2-2c4-3 7-8 7-13v-16c0-5-4-9-8-9h-34c-8 0-15-1-22-3-9-3-18-5-27-5-41 0-74 30-74 66z\"\n});\n\nvar _ref11 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#5a4650\",\n  d: \"M297 231c0-27 26-49 58-49s58 22 58 49c0 28-26 50-58 50s-58-22-58-50z\"\n});\n\nvar _ref12 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#84737b\",\n  d: \"M355 206c-22 0-41 6-56 14 6-22 29-38 56-38s50 16 56 38c-14-8-34-14-56-14z\"\n});\n\nvar SvgCool = function SvgCool(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 512 512\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9, _ref10, _ref11, _ref12);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgCool, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/cool.76aceb28.svg\";\nexport { ForwardRef as ReactComponent };","import styled, {\n  css as baseCSS,\n  ThemedCssFunction,\n  ThemedStyledInterface,\n  ThemeProps as BaseThemeProps,\n  // @ts-ignore (ignore while @types/styled-components isn't up to date)\n  useTheme as baseUseTheme\n} from \"styled-components\";\n\nimport { Theme } from \"ui/theme\";\n\nexport type ThemeProps = BaseThemeProps<Theme>;\n\nexport type ThemedProps<P = {}> = ThemeProps & P;\n\nexport const useTheme = baseUseTheme as () => Theme;\n\nexport const getThemeProp = <P extends keyof Theme>(key: P) => <\n  TProps extends ThemeProps = ThemeProps\n>(\n  lens: ((props: TProps) => keyof Theme[P]) | keyof Theme[P]\n) => (props: TProps) => {\n  const $value = typeof lens === \"function\" ? lens(props) : lens;\n\n  return props.theme[key][$value];\n};\n\nexport const getColor = getThemeProp(\"colors\");\nexport const getRadius = getThemeProp(\"radii\");\nexport const getFontSize = getThemeProp(\"fontSizes\");\nexport const getShadow = getThemeProp(\"shadows\");\nexport const getFontFamily = getThemeProp(\"fontFamilies\");\nexport const getAnimation = getThemeProp(\"animations\");\n\nexport const css = baseCSS as ThemedCssFunction<Theme>;\nexport default styled as ThemedStyledInterface<Theme>;\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"defs\", null);\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"circle\", {\n  cx: 256.3,\n  cy: 256,\n  r: 245,\n  fill: \"#fec753\"\n});\n\nvar _ref4 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#35528c\",\n  d: \"M256 105C133 105 30 217 3 248c-4 5-4 11 0 16 27 31 130 143 253 143s226-112 253-143c4-5 4-11 0-16-27-31-130-143-253-143z\"\n});\n\nvar _ref5 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#1f3a60\",\n  d: \"M42 256c0-24 96-151 214-151C134 105 31 215 4 247c-5 5-5 13 0 18 27 32 130 142 252 142-118 0-214-127-214-151z\"\n});\n\nvar _ref6 =\n/*#__PURE__*/\nReact.createElement(\"circle\", {\n  cx: 256,\n  cy: 256,\n  r: 132,\n  fill: \"#99d3ff\"\n});\n\nvar _ref7 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#5bb3ce\",\n  d: \"M176 256c0-64 46-117 106-129a133 133 0 00-158 129 132 132 0 00158 129c-60-12-106-65-106-129z\"\n});\n\nvar _ref8 =\n/*#__PURE__*/\nReact.createElement(\"circle\", {\n  cx: 254.6,\n  cy: 256,\n  r: 65.6,\n  fill: \"#1f3a60\"\n});\n\nvar _ref9 =\n/*#__PURE__*/\nReact.createElement(\"circle\", {\n  cx: 308.1,\n  cy: 225.6,\n  r: 27.9,\n  fill: \"#dcf3ff\"\n});\n\nvar SvgEye = function SvgEye(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 512 512\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgEye, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/eye.a2510f3f.svg\";\nexport { ForwardRef as ReactComponent };","import styled, {\n  getColor,\n  getFontFamily,\n  getShadow,\n  getRadius\n} from \"ui/styled\";\nimport between from \"polished/lib/mixins/between\";\n\nimport { ReactComponent as EyeIcon } from \"assets/eye.svg\";\nimport { css } from \"styled-components\";\n\nexport const BOARD_WIDTH = \"1151.42px\";\nexport const BOARD_HEIGHT = \"893px\";\n\nexport const Root = styled.div`\n  font-family: ${getFontFamily(\"default\")};\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  font-size: 16px;\n  background: ${getColor(\"muted\")};\n`;\n\nexport const AppBar = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 3.8em;\n  background: ${getColor(\"black\")};\n  box-shadow: ${getShadow(\"default\")};\n`;\n\nexport const Clamp = styled.div`\n  display: flex;\n  width: ${BOARD_WIDTH};\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between;\n  @media screen and (max-width: ${BOARD_WIDTH}) {\n    width: 100vw;\n    padding-left: 0.5em;\n    padding-right: 0.5em;\n  }\n`;\n\nexport const Brand = styled.div`\n  font-family: ${getFontFamily(\"display\")};\n  color: ${getColor(\"primary\")};\n  font-size: ${between(\"2em\", \"3em\")};\n  display: flex;\n  flex: 1;\n`;\n\nexport const Controls = styled.div`\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  align-items: flex-end;\n`;\n\nexport const StatusDisplay = styled.div<{ isGameOver: boolean }>`\n  background: ${getColor(\"shadow\")};\n  box-shadow: ${getShadow(\"default\")};\n  border-radius: 50%;\n  width: 2.8em;\n  height: 2.8em;\n  margin-top: 0.8em;\n  padding: 0.4em;\n  animation: ${p =>\n    p.isGameOver\n      ? css`\n          ${p.theme.animations.glow} 4s infinite ease\n        `\n      : \"none\"};\n`;\n\nexport const Content = styled.div`\n  display: flex;\n  max-width: calc(100vw - 1em);\n  max-height: calc(100vh - 7em);\n  margin-top: 1em;\n  margin-bottom: 1em;\n  -ms-overflow-style: none;\n  @media screen and (max-height: ${BOARD_HEIGHT}) {\n    overflow: scroll;\n  }\n  @media screen and (max-width: ${BOARD_WIDTH}) {\n    overflow: scroll;\n  }\n`;\n\nexport const Progress = styled.div`\n  display: flex;\n  color: ${getColor(\"primary\")};\n  min-width: 8em;\n  flex-direction: column;\n  align-items: center;\n  background: ${getColor(\"shadow\")};\n  border-radius: ${getRadius(\"lg\")};\n  height: 3em;\n  justify-content: space-around;\n`;\n\nexport const ProgressContainer = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: ${getColor(\"primary\")};\n  font-size: 1.3em;\n`;\n\nexport const ProgressLine = styled.div<{ progress: number }>`\n  height: 0.3em;\n  overflow: hidden;\n  border-radius: ${getRadius(\"default\")};\n  width: 80%;\n  align-self: center;\n  background: linear-gradient(\n    to right,\n    ${getColor(\"positive\")} 0%,\n    ${getColor(\"positive\")} ${p => p.progress}%,\n    ${getColor(\"white\")} ${p => p.progress}%,\n    ${getColor(\"white\")} 100%\n  );\n`;\n\nexport const ProgressIcon = styled(EyeIcon)`\n  width: 0.9em;\n  height: 0.9em;\n  margin-right: 0.5em;\n`;\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"defs\", null);\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#555656\",\n  d: \"M456 260c0 107-89 193-198 193-34 0-67-8-96-25-63-33-102-97-102-168 0-106 89-192 198-192a193 193 0 01198 192z\"\n});\n\nvar _ref4 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#717272\",\n  d: \"M413 243a196 196 0 01-251 185C99 395 60 331 60 260c0-106 89-192 198-192 18 0 36 2 53 7 63 33 102 98 102 168z\"\n});\n\nvar _ref5 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  fill: \"#a8a5a4\"\n}, React.createElement(\"path\", {\n  d: \"M60 260v5c0 4-7 5-16 3l-29-7c-9-3-9-7 0-9l29-7c10-3 17 1 16 9v6zM468 268c-9 2-16 1-16-4v-11c0-7 6-11 16-9l29 8c9 2 9 6 0 8l-29 8zM282 111a12 12 0 01-13 16h-35a12 12 0 01-13-16l7-26 9-33 10-37c3-9 7-9 9 0l10 37 8 33 8 26zM153 151a12 12 0 013 21l-25 24a13 13 0 01-21-2l-12-21-17-29-21-36c-5-8-2-11 6-6l32 18 30 17 25 14zM441 102c9-5 11-2 6 6l-19 32-17 29-14 25a13 13 0 01-21 2l-25-25a12 12 0 013-20l28-16 30-17 29-16zM269 385a12 12 0 0113 16l-10 35-8 33-8 28c-3 9-7 9-9 0l-7-28-9-34-9-34a12 12 0 0112-16h35zM156 340a12 12 0 01-3 21l-30 17-30 17-27 15c-9 5-11 2-6-6l18-31 17-30 15-25a13 13 0 0121-2l25 24zM447 404c5 8 2 11-6 6l-24-13-29-17-35-20a12 12 0 01-2-20l25-24a13 13 0 0121 3l17 29 17 29 16 27z\"\n}));\n\nvar _ref6 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M51 277l-9-1-29-7c-11-3-13-9-13-13s2-10 13-13l29-7c7-3 15-1 20 3s7 9 6 15v11c0 3-1 7-4 9-4 3-8 4-13 3zm-18-21l13 3 5 1v-8h-4l-14 4zM460 277c-4 1-8-1-12-3-3-3-5-6-4-10v-11c-1-5 1-10 6-14s13-5 20-3l29 7c11 3 13 9 13 13s-2 10-13 13l-29 7-10 1zm0-13h1-1zm2-12h-2v8l6-1 13-3-14-4h-3z\"\n});\n\nvar _ref7 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M268 462a9 9 0 01-9-11l16-58h-47l15 57a9 9 0 01-9 11c-51-6-99-30-133-69a9 9 0 013-13l50-29-33-33-27 45c-1 3-4 5-7 5-3-1-6-2-7-5-17-27-26-58-28-89v-13a184 184 0 0130-106c2-3 5-4 8-4s5 2 7 4l24 41 33-33-45-26a9 9 0 01-2-13c33-35 77-57 125-63a9 9 0 019 11l-13 48h47l-13-49a9 9 0 019-11c50 4 97 26 132 62a9 9 0 01-1 13l-49 28 33 33 26-45a9 9 0 0115 0 198 198 0 0134 110l-1 13c-2 33-12 66-30 94a9 9 0 01-15 0l-29-49-33 32 54 31a9 9 0 012 13c-36 40-87 64-141 67v1zm-51-86h69a9 9 0 019 11l-15 56c41-5 79-23 109-53l-54-30a9 9 0 01-2-14l49-48a9 9 0 0114 1l27 46c12-23 19-48 20-73v-12l-1-19c-2-25-10-48-22-70l-25 42a9 9 0 01-13 2l-49-49a9 9 0 012-14l48-27c-28-26-63-42-101-47l13 47a9 9 0 01-9 11h-69a9 9 0 01-9-11l13-46c-35 7-68 23-94 47l46 26a9 9 0 012 14l-50 48a9 9 0 01-13-2l-22-37a178 178 0 00-21 85v11c1 24 8 48 18 69l25-41a9 9 0 0113-2l49 49a9 9 0 01-2 13l-51 29c28 28 63 47 102 53l-15-54a9 9 0 019-11z\"\n});\n\nvar _ref8 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M269 136h-35a21 21 0 01-21-27l26-96c3-11 8-13 13-13 4 0 9 2 13 13l25 96a21 21 0 01-21 27zM252 32l-23 81a4 4 0 005 6h35a4 4 0 005-6l-22-81zM121 209h-2c-7-1-13-5-16-11l-51-86c-5-9-3-15 0-18s8-5 18 0l88 50a21 21 0 014 34l-25 24c-4 5-10 7-16 7zm-46-93l43 73a4 4 0 007 1l25-24a4 4 0 00-1-7l-74-43zM386 209c-6 0-12-2-16-7l-25-24a21 21 0 014-34l88-50c10-6 15-3 18 0s5 9 0 18l-51 86c-3 6-9 10-16 11h-2zm46-93l-74 43a4 4 0 00-1 7l25 24a4 4 0 007-1l43-73zM252 512c-5 0-10-2-13-13l-26-96a21 21 0 0121-27h35a21 21 0 0121 27l-25 96c-4 11-9 13-13 13zm-18-119a4 4 0 00-5 6l23 81 22-81a4 4 0 00-5-6h-35zM60 421c-3 0-6-1-8-3-3-3-5-9 0-18l51-86a21 21 0 0134-5l25 25a21 21 0 01-5 34l-87 50c-3 2-7 3-10 3zm62-101c-2 0-3 1-4 3l-43 72 75-42a4 4 0 001-7l-25-24c-1-2-3-2-5-2h1zM447 421c-3 0-7-1-10-3l-88-50a21 21 0 01-4-34l25-25a21 21 0 0134 5l50 86c6 9 4 15 1 18-2 2-5 3-8 3zm-61-101l-4 2-25 24a4 4 0 001 7l74 43-43-73c0-2-1-3-3-3z\"\n});\n\nvar _ref9 =\n/*#__PURE__*/\nReact.createElement(\"ellipse\", {\n  cx: 251.6,\n  cy: 256,\n  fill: \"#bdbdbd\",\n  rx: 34.9,\n  ry: 34.3\n});\n\nvar _ref10 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M252 299zm0-69a26 26 0 101 52 26 26 0 00-1-52zM69 247h148v17H69zM290 247h153v17H290zM243 127h17v94h-17zM243 290h17v94h-17z\"\n});\n\nvar SvgMine = function SvgMine(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 512 512\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9, _ref10);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgMine, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/mine.de166f20.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"defs\", null);\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#fc644f\",\n  d: \"M389 271l121 163c-91 30-300 24-381-18V126c80 41 290 49 381 18L389 271z\"\n});\n\nvar _ref4 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#f1543f\",\n  d: \"M129 415l65-32-48-145-17 24z\"\n});\n\nvar _ref5 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#ff7058\",\n  d: \"M41 47v289s75-20 152 46V94C116 27 41 47 41 47z\"\n});\n\nvar _ref6 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#40596b\",\n  d: \"M32 0C16 0 2 13 2 29v483h59V29C61 13 48 0 32 0z\"\n});\n\nvar SvgFlag = function SvgFlag(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 512 512\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3, _ref4, _ref5, _ref6);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgFlag, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/flag.5193edf2.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useMemo } from \"react\";\n\nimport styled, {\n  getShadow,\n  getRadius,\n  getColor,\n  getAnimation\n} from \"ui/styled\";\nimport * as Game from \"lib/game\";\n\nimport { ReactComponent as MineIcon } from \"assets/mine.svg\";\nimport { ReactComponent as FlagIcon } from \"assets/flag.svg\";\n\nexport const Mine = styled(MineIcon)`\n  width: 1.4em;\n  height: 1.4em;\n  animation: ${getAnimation(\"appear\")} 0.2s ease-in-out;\n`;\n\nexport const Flag = styled(FlagIcon)`\n  width: 1.4em;\n  height: 1.4em;\n  animation: ${getAnimation(\"appear\")} 0.2s ease-in-out;\n`;\n\nconst numberColors: Record<number, string> = {\n  0: \"white\",\n  1: \"blue\",\n  2: \"green\",\n  3: \"red\",\n  4: \"darkblue\",\n  5: \"darkgreen\",\n  6: \"darkred\",\n  7: \"purple\",\n  8: \"darkpurple\"\n};\n\ninterface Props extends Game.Tile {\n  active?: boolean;\n  onClick?: () => void;\n}\n\nconst GridTileContainer = styled.div<Props>`\n  width: 1.6em;\n  height: 1.6em;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  box-shadow: ${getShadow(props => (props.revealed ? \"none\" : \"default\"))};\n  border-radius: ${getRadius(\"lg\")};\n  margin: 0.2em;\n  padding: 0.2em;\n  background: ${getColor(props =>\n    props.revealed\n      ? props.kind === \"mine\" && props.active\n        ? \"negative\"\n        : \"white\"\n      : \"gray\"\n  )};\n  transition: all 0.2s ease-in-out;\n  font-weight: bold;\n  user-select: none;\n  ${props =>\n    // dynamic number-color mapping\n    typeof props.children === \"number\"\n      ? `color:  ${numberColors[props.children]}`\n      : undefined};\n`;\n\nconst GridTile: React.FC<Props> = props => {\n  const content = useMemo(() => {\n    if (props.flagged) {\n      return <Flag />;\n    }\n    if (!props.revealed || props.kind === \"safe\") {\n      return null;\n    }\n\n    switch (props.kind) {\n      case \"empty\":\n        return props.surroundingMines;\n      case \"mine\":\n        return <Mine />;\n    }\n  }, [props]);\n  return (\n    <GridTileContainer onClick={props.onClick} {...props} active={props.active}>\n      {content}\n    </GridTileContainer>\n  );\n};\n\nexport default GridTile;\n","import React, { useCallback } from \"react\";\n\nimport styled from \"ui/styled\";\nimport { Tile } from \"lib/game\";\nimport { Matrix, Cell } from \"lib/Grid\";\n\nimport GridTile from \"./GridTile\";\n\nexport const GridContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n`;\n\nexport const GridRow = styled.div`\n  display: flex;\n`;\n\ninterface Props {\n  grid: Matrix<Tile>;\n  onTileClick(cell: Cell<Tile>): void;\n  activeCell?: Cell<Tile>;\n}\n\nconst GridComponent: React.FC<Props> = props => {\n  const handleCellClick = useCallback(\n    (cell: Cell<Tile>) => () => props.onTileClick(cell),\n    [props]\n  );\n\n  return (\n    <GridContainer>\n      {props.grid.map((row, y) => (\n        <GridRow key={y}>\n          {row.map((cell, x) => (\n            <GridTile\n              key={x}\n              {...cell.value}\n              active={\n                cell.row === props.activeCell?.row &&\n                cell.column === props.activeCell?.column\n              }\n              onClick={handleCellClick(cell)}\n            />\n          ))}\n        </GridRow>\n      ))}\n    </GridContainer>\n  );\n};\n\nexport default GridComponent;\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"defs\", null);\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M256 5a257 257 0 00-81 501c13 3 18-5 18-12l-1-44c-71 16-86-34-86-34-12-30-28-38-28-38-24-16 1-16 1-16 26 2 39 27 39 27 23 39 60 28 75 21 2-16 9-28 16-34-57-7-116-29-116-127 0-28 10-51 26-69-3-7-11-33 3-68 0 0 21-7 70 26a244 244 0 01128 0c49-33 70-26 70-26 14 35 6 61 3 68 16 18 26 41 26 69 0 99-60 120-117 127 10 8 18 23 18 47v71c0 7 4 15 17 12A257 257 0 00256 5z\"\n});\n\nvar SvgGithub = function SvgGithub(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 512 512\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgGithub, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/github.1c80c8c6.svg\";\nexport { ForwardRef as ReactComponent };","import React from \"react\";\n\nimport styled, {\n  getColor,\n  getShadow,\n  getRadius,\n  getAnimation\n} from \"ui/styled\";\n\nimport { ReactComponent as GithubSVG } from \"assets/github.svg\";\n\nexport const GithubIcon = styled(GithubSVG)`\n  height: 1.6em;\n  width: 1.6em;\n`;\n\nexport const GithubLabel = styled.div`\n  white-space: nowrap;\n`;\n\nexport const GithubBadge = styled.a`\n  border-radius: ${getRadius(\"round\")};\n  color: ${getColor(\"secondary\")};\n  background: ${getColor(\"white\")};\n  display: flex;\n  padding: 0.3em 0.4em;\n  width: 1.8em;\n  height: 1.8em;\n  overflow: hidden;\n  ${GithubLabel} {\n    display: none;\n  }\n  justify-content: space-around;\n  align-items: center;\n  box-shadow: ${getShadow(\"default\")};\n  font-weight: 700;\n  text-decoration: none;\n  :hover {\n    ${GithubLabel} {\n      display: flex;\n      animation: ${getAnimation(\"appear\")} 0.3s;\n    }\n    width: 12em;\n    border-radius: calc(1.8em);\n  }\n  transition: all 0.3s ease-in-out;\n  user-select: none;\n  outline: none;\n`;\n\nconst Github: React.FC = () => {\n  return (\n    <GithubBadge\n      target=\"_blank\"\n      rel=\"noreferrer\"\n      href=\"https://github.com/alanrsoares/ts-mines\"\n      aria-label=\"got to the project's github page\"\n    >\n      <GithubIcon />\n      <GithubLabel>@alanrsoares/ts-mines</GithubLabel>\n    </GithubBadge>\n  );\n};\n\nexport default Github;\n","import React from \"react\";\nimport { darken } from \"polished\";\n\nimport { Mode } from \"lib/game\";\n\nimport styled, { getColor, getShadow, getRadius } from \"ui/styled\";\n\nimport { Color } from \"ui/theme\";\nimport { Clamp } from \"ui/components/core\";\nimport Github from \"ui/components/Github\";\nimport { ReactComponent as EyeIcon } from \"assets/eye.svg\";\nimport { ReactComponent as FlagIcon } from \"assets/flag.svg\";\n\nconst Eye = styled(EyeIcon)`\n  width: 1em;\n  height: 1em;\n`;\n\nconst Flag = styled(FlagIcon)`\n  width: 1em;\n  height: 1em;\n`;\n\nconst Circle = styled.div`\n  border-radius: ${getRadius(\"round\")};\n  background-color: ${getColor(\"gray\")};\n  width: 1.4em;\n  height: 1.4em;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 0.1em;\n`;\n\nexport const Button = styled.button<{\n  color: Color;\n  side: \"left\" | \"right\";\n  active?: boolean;\n}>`\n    border: none;\n    background-color: ${p =>\n      p.active ? getColor(p.color)(p) : darken(0.5, getColor(p.color)(p))};\n    height: 2.1em;\n    width: 2.8em;\n    ${p => `\n      border-top-${p.side}-radius: ${p.theme.radii.xxxl};\n      border-bottom-${p.side}-radius: ${p.theme.radii.xxxl};\n    `}\n    box-shadow: ${getShadow(p => (p.active ? \"inset\" : \"default\"))};\n    outline: none;\n    transition: all .1s ease;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  `;\n\nexport const ButtonGroup = styled.div`\n  display: flex;\n`;\n\nexport const Root = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 3em;\n  background: ${getColor(\"dark\")};\n  color: ${getColor(\"white\")};\n  box-shadow: ${getShadow(\"default\")};\n  position: fixed;\n  bottom: 0;\n`;\n\nconst Footer: React.FC<{\n  onToggleGameMode(): void;\n  gameMode: Mode;\n}> = props => {\n  return (\n    <Root>\n      <Clamp>\n        <Github />\n        <ButtonGroup>\n          <Button\n            side=\"left\"\n            color=\"white\"\n            active={props.gameMode === \"flag\"}\n            onClick={props.onToggleGameMode}\n            aria-label=\"Toggle game mode\"\n          >\n            <Circle>\n              <Flag />\n            </Circle>\n          </Button>\n          <Button\n            side=\"right\"\n            color=\"white\"\n            active={props.gameMode === \"reveal\"}\n            onClick={props.onToggleGameMode}\n            aria-label=\"Toggle game mode\"\n          >\n            <Circle>\n              <Eye />\n            </Circle>\n          </Button>\n        </ButtonGroup>\n      </Clamp>\n    </Root>\n  );\n};\n\nexport default Footer;\n","import React, { useState, useCallback, useEffect, useMemo } from \"react\";\nimport flatten from \"ramda/es/flatten\";\n\nimport Grid, { Cell, Matrix } from \"lib/Grid\";\nimport * as Game from \"lib/game\";\nimport Storage from \"lib/StorageAdapter\";\nimport useUpdateChecker from \"lib/useUpdateChecker\";\n\nimport { ReactComponent as SkullIcon } from \"assets/skull.svg\";\nimport { ReactComponent as ThinkingIcon } from \"assets/thinking.svg\";\nimport { ReactComponent as CoolIcon } from \"assets/cool.svg\";\n\nimport {\n  Root,\n  AppBar,\n  Brand,\n  StatusDisplay,\n  Content,\n  Clamp,\n  Controls,\n  Progress,\n  ProgressIcon,\n  ProgressLine,\n  ProgressContainer\n} from \"ui/components/core\";\n\nimport GridComponent from \"ui/components/Grid\";\nimport Footer from \"ui/components/Footer\";\n\nconst statusAssets: Record<Game.GameStatus, JSX.Element> = {\n  new: <ThinkingIcon />,\n  won: <CoolIcon />,\n  over: <SkullIcon />\n};\n\nexport default function App() {\n  useUpdateChecker();\n\n  const [score, setScore] = useState(Storage.read(0, \"/score\"));\n  const [gameStatus, setGameStatus] = useState<Game.GameStatus>(\n    Storage.read(\"new\", \"/gameStatus\")\n  );\n  const [gameMode, setGameMode] = useState<Game.Mode>(\n    Storage.read(\"reveal\", \"/mode\")\n  );\n\n  const [activeCell, setActiveCell] = useState<Cell<Game.Tile> | undefined>(\n    Storage.read(undefined, \"/activeCell\")\n  );\n  const [grid, setGrid] = useState<Matrix<Game.Tile>>(\n    Storage.read(\n      Game.makeNewGrid({ rows: 20, columns: 30 }, 80).snapshot,\n      \"/grid\"\n    )\n  );\n\n  useEffect(() => {\n    Storage.persist(score, \"/score\");\n  }, [score]);\n\n  useEffect(() => {\n    Storage.persist(gameStatus, \"/gameStatus\");\n  }, [gameStatus]);\n\n  useEffect(() => {\n    Storage.persist(grid, \"/grid\");\n  }, [grid]);\n\n  useEffect(() => {\n    Storage.persist(gameMode, \"/mode\");\n  }, [gameMode]);\n\n  useEffect(() => {\n    if (activeCell) {\n      Storage.persist(activeCell, \"/activeCell\");\n    }\n  }, [activeCell]);\n\n  const handleCellClick = useCallback(\n    (cell: Cell<Game.Tile>) => {\n      if (gameStatus === \"over\" || gameStatus === \"won\") {\n        return;\n      }\n\n      setActiveCell(cell);\n\n      const tile = cell.value;\n\n      switch (gameMode) {\n        case \"flag\":\n          {\n            // ignore clicking on a \"revealed\" tile while on \"flag\" mode\n            if (tile.revealed) {\n              return;\n            }\n            const nextGrid = Grid.from(grid).updateCell(cell, {\n              ...tile,\n              flagged: !tile.flagged\n            });\n            setGrid(nextGrid.snapshot);\n          }\n          break;\n        case \"reveal\":\n          {\n            // ignore clicking on a \"flagged\" tile while on \"reveal\" mode\n            if (tile.flagged) {\n              return;\n            }\n\n            if (tile.kind === \"mine\") {\n              // reveal mines\n              const nextGrid = Grid.from(grid).map(Game.revealMine);\n              setGrid(nextGrid.snapshot);\n              setGameStatus(\"over\");\n              return;\n            }\n\n            const nextGrid = Game.getNextGrid(grid, cell).snapshot;\n            const nextScore = flatten(nextGrid).filter(c => c.value.revealed)\n              .length;\n\n            setGrid(nextGrid);\n            setScore(nextScore);\n          }\n          break;\n      }\n    },\n    [grid, gameStatus, gameMode]\n  );\n\n  const handleStatusClick = useCallback(() => {\n    if (gameStatus === \"over\") {\n      setGrid(Game.makeNewGrid({ rows: 20, columns: 30 }, 80).snapshot);\n      setGameStatus(\"new\");\n      setScore(0);\n    }\n  }, [gameStatus]);\n\n  const handleToggleGameMode = useCallback(() => {\n    setGameMode(mode => (mode === \"flag\" ? \"reveal\" : \"flag\"));\n  }, []);\n\n  useEffect(() => {\n    const onKeyUp = (e: KeyboardEvent) => {\n      e.preventDefault();\n      if (e.keyCode === 32) {\n        handleToggleGameMode();\n      }\n    };\n    document.addEventListener(\"keyup\", onKeyUp);\n\n    return () => {\n      document.removeEventListener(\"keyup\", onKeyUp);\n    };\n  }, [handleToggleGameMode]);\n\n  const progress = useMemo(\n    () => (score / (grid.length * grid[0].length)) * 100,\n    [score, grid]\n  );\n\n  return (\n    <Root>\n      <AppBar>\n        <Clamp>\n          <Brand>[MINES]</Brand>\n          <StatusDisplay\n            isGameOver={gameStatus === \"over\"}\n            onClick={handleStatusClick}\n          >\n            {statusAssets[gameStatus]}\n          </StatusDisplay>\n          <Controls>\n            <Progress>\n              <ProgressContainer>\n                <ProgressIcon /> {score}\n              </ProgressContainer>\n              <ProgressLine progress={progress} />\n            </Progress>\n          </Controls>\n        </Clamp>\n      </AppBar>\n      <Content>\n        <GridComponent\n          grid={grid}\n          activeCell={activeCell}\n          onTileClick={handleCellClick}\n        />\n      </Content>\n      <Footer onToggleGameMode={handleToggleGameMode} gameMode={gameMode} />\n    </Root>\n  );\n}\n","import React, { StrictMode } from \"react\";\r\nimport { render } from \"react-dom\";\r\nimport { ThemeProvider } from \"styled-components\";\r\n\r\nimport \"normalize.css\";\r\n\r\nimport theme from \"ui/theme\";\r\n\r\nimport { version } from \"../package.json\";\r\n\r\nimport App from \"./App\";\r\nimport registerServiceWorker from \"./registerServiceWorker\";\r\nimport \"./styles.css\";\r\n\r\n// add appVersion to global scope\r\nglobal.appVersion = version;\r\n\r\nconst rootElement = document.getElementById(\"root\");\r\n\r\nconst app = (\r\n  <StrictMode>\r\n    <ThemeProvider theme={theme}>\r\n      <App />\r\n    </ThemeProvider>\r\n  </StrictMode>\r\n);\r\n\r\nrender(app, rootElement);\r\n\r\nregisterServiceWorker();\r\n"],"sourceRoot":""}