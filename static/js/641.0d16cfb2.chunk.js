"use strict";(self.webpackChunkts_mines=self.webpackChunkts_mines||[]).push([[641],{7641:function(e,n,t){t.r(n),t.d(n,{App:function(){return Kt},default:function(){return Qt}});var r=t(3646),a=t(6583),i=t(3812),o=t(3382),l=t(1995),c=t(5674),s=t(3877),u=t(5665),d=t(8966),f=function(e){var n=new Map;return function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var i=JSON.stringify(r);if(n.has(i))return n.get(i);var o=e.apply(void 0,r);return n.set(i,o),o}},m=function(e,n){return!function(e,n,t){return t>=e&&t<n}(0,n,e)},h=function(e,n){return m(e.row,n.rows)||m(e.column,n.columns)},p=function(){function e(){(0,u.Z)(this,e),this._dimensions={rows:0,columns:0},this._grid=[],this.getNeighborsCoordinates=f((function(e){for(var n=e.row,t=e.column,r=[],a=-1;a<=1;a++)for(var i=-1;i<=1;i++)0===a&&0===i||r.push({row:n+a,column:t+i});return r}));for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];if(1===t.length&&Array.isArray(t[0])){this._grid=t[0];var a={rows:this._grid.length,columns:this._grid[0].length};return this._dimensions=a,this}if("object"===typeof t[0]&&null!==t[0]){for(var i=t[0],o=t[1],l=[],c=0;c<i.rows;c++){for(var s=[],d=0;d<i.columns;d++){var m="function"===typeof o?o({row:c,column:d}):o;s.push({row:c,column:d,value:m})}l.push(s)}return this._dimensions=i,this._grid=l,this}throw new Error("Invalid argument: ".concat(t[0]))}return(0,d.Z)(e,[{key:"withSeed",value:function(e){return this._grid=e,this}},{key:"snapshot",get:function(){return this._grid.slice()}},{key:"updateCell",value:function(e,n){var t=e.row,r=e.column,a=this.getCell({row:t,column:r}),i="function"===typeof n?n({row:t,column:r},a.value):n;return this._grid[t][r]={row:t,column:r,value:i},this}},{key:"getCell",value:function(e){var n=e.row,t=e.column;if(!h({row:n,column:t},this._dimensions))return this._grid[n][t];throw new Error("Invalid cell coordinates: row: ".concat(n,"; column: ").concat(t))}},{key:"getCellNeighbors",value:function(e){var n=this,t=e.row,r=e.column;return this.getNeighborsCoordinates({row:t,column:r}).reduce((function(e,t){return h(t,n._dimensions)?e:[].concat((0,s.Z)(e),[n.getCell(t)])}),[])}},{key:"map",value:function(n){var t=this,r=this._grid.map((function(e){return e.map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{value:n(e.value,e,t)})}))}));return e.from(r)}}],[{key:"make",value:function(){return new e(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1])}},{key:"from",value:function(n){return new e(n)}}]),e}(),v={easy:15,medium:20,hard:25,ultra:30,god:35},g={easy:"medium",medium:"hard",hard:"ultra",ultra:"god",god:"easy"},w=function(e){return{rows:e,columns:Math.floor(1.5*e)}},b={xs:w(10),sm:w(15),md:w(20),lg:w(25),xl:w(30)},x={xs:"sm",sm:"md",md:"lg",lg:"xl",xl:"xs"},y=function(e){return(0,c.yGi)("revealed",!0,e)},E=function(e){return"mine"===e.kind?y(e):e};function j(e,n){var t=p.from(e),r=n.value;return t.updateCell(n,y(r)),"safe"!==r.kind||t.getCellNeighbors(n).forEach((function(e){var n=e.value;if(!n.revealed)switch(n.kind){case"empty":t.updateCell(e,y(n));break;case"safe":return j(t.snapshot,e)}})),t}var k=function(e){return"mine"===e.value.kind},O=function(e,n){return p.make(e,(function(){return{kind:Math.random()>=n/100?"empty":"mine",surroundingMines:0,revealed:!1}})).map((function(e,n,t){if("mine"!==e.kind){var r=t.getCellNeighbors(n).filter(k).length;return(0,i.Z)((0,i.Z)({},e),{},{surroundingMines:r,kind:r?"empty":"safe"})}return e}))};function Z(e){var n=(0,c.xHg)(e.snapshot),t=n.reduce((function(e,n){return{flagged:n.value.defused?e.flagged+1:e.flagged,revealed:n.value.revealed?e.revealed+1:e.revealed,mines:"mine"===n.value.kind?e.mines+1:e.mines}}),{flagged:0,revealed:0,mines:0});return t.mines===t.flagged&&t.revealed+t.flagged===n.length}var M=t(1832),C=t(7374);function S(e){return z.apply(this,arguments)}function z(){return(z=(0,C.Z)((0,M.Z)().mark((function e(n){var t;return(0,M.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.querySelector("#sound-fx-".concat(n))){e.next=3;break}throw new Error("Invalid sound effect: ".concat(n));case 3:return e.prev=3,e.next=6,t.play();case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log("Failed to play sound effect: ".concat(n));case 11:case"end":return e.stop()}}),e,null,[[3,8]])})))).apply(this,arguments)}var L,T=function(e){return e.reduce((function(e,n){return n.reduce((function(e,n){return"mine"===n.value.kind?e+1:e}),e)}),0)},_="easy",P=O({rows:20,columns:30},v.easy).snapshot,F={gameStatus:"new",gameMode:"reveal",gameLevel:_,boardSize:"xs",activeCell:void 0,score:0,grid:P,enableSFX:!1,mineCount:T(P)},I=(L=["won","over"],function(e){return L.includes(e)}),G=function(e,n){switch(n.type){case"TOGGLE_GAME_MODE":return(0,i.Z)((0,i.Z)({},e),{},{gameMode:"defuse"===e.gameMode?"reveal":"defuse"});case"TOGGLE_SOUND_EFFECTS":return(0,i.Z)((0,i.Z)({},e),{},{enableSFX:!e.enableSFX});case"RESET":if(!I(e.gameStatus))return e;var t=O(b[e.boardSize],v[e.gameLevel]).snapshot;return(0,i.Z)((0,i.Z)({},F),{},{grid:t,gameLevel:e.gameLevel,boardSize:e.boardSize,mineCount:T(t)});case"TOGGLE_CELL":var r=n.payload,a=r.cell,o=r.mode;if(I(e.gameStatus))return e;var l=a.value,s=null!==o&&void 0!==o?o:e.gameMode,u=(0,i.Z)((0,i.Z)({},e),{},{activeCell:n.payload.cell});if(l.revealed||l.defused)return u;switch(s){case"defuse":if("mine"!==l.kind){var d=p.from(e.grid).updateCell(a,(0,i.Z)((0,i.Z)({},l),{},{revealed:!0}));return e.enableSFX&&S("disabled"),(0,i.Z)((0,i.Z)({},u),{},{grid:d.map(E).snapshot,gameStatus:"over"})}e.enableSFX&&S("defuse");var f=p.from(e.grid).updateCell(a,(0,i.Z)((0,i.Z)({},l),{},{defused:!l.defused})),m=Z(f);return m&&e.enableSFX&&S("win"),(0,i.Z)((0,i.Z)({},u),{},{grid:f.snapshot,gameStatus:m?"won":e.gameStatus,score:e.score+1,gameLevel:m?g[e.gameLevel]:e.gameLevel,boardSize:m?x[e.boardSize]:e.boardSize});case"reveal":if("mine"===l.kind)return e.enableSFX&&S("explosion"),(0,i.Z)((0,i.Z)({},u),{},{grid:p.from(e.grid).map(E).snapshot,gameStatus:"over"});var h=j(e.grid,a),w=(0,c.xHg)(h.snapshot).filter((function(e){return e.value.revealed})).length,y=Z(h);if(e.enableSFX){var k=w-e.score;S(y?"win":k>1?"streak":"reveal")}return(0,i.Z)((0,i.Z)({},u),{},{grid:h.snapshot,score:w,gameStatus:y?"won":e.gameStatus})}}},A=function(){function e(n){(0,u.Z)(this,e),this.namespace="",this.namespace=n}return(0,d.Z)(e,[{key:"write",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";localStorage.setItem("".concat(this.namespace).concat(n),JSON.stringify(null!==e&&void 0!==e?e:null))}},{key:"read",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=localStorage.getItem("".concat(this.namespace).concat(n));return null!==t?JSON.parse(t):e}}]),e}(),N=new A("@TS-MINES");var B=(0,a.f)((function(){var e=function(e,n,t){var r=N.read(n,e),a=(0,l.useReducer)(t,r),i=(0,o.Z)(a,2),c=i[0],s=i[1];return(0,l.useEffect)((function(){N.write(c,e)}),[c,e]),[c,s]}("/state",F,G),n=(0,o.Z)(e,2),t=n[0],r=n[1],a=(0,l.useMemo)((function(){var e=t.grid.length*t.grid[0].length-(t.mineCount||T(t.grid));return t.score/e*100}),[t.grid,t.mineCount,t.score]),c=(0,l.useCallback)((function(e,n){r({type:"TOGGLE_CELL",payload:{cell:e,mode:n}})}),[r]),s=(0,l.useCallback)((function(e){r({type:"TOGGLE_CELL",payload:{cell:e,mode:"defuse"}})}),[r]),u=(0,l.useCallback)((function(){r({type:"RESET"})}),[r]),d=(0,l.useCallback)((function(){r({type:"TOGGLE_GAME_MODE"})}),[r]),f=(0,l.useCallback)((function(){r({type:"TOGGLE_SOUND_EFFECTS"})}),[r]);return{state:(0,i.Z)((0,i.Z)({},t),{},{progress:a}),handlers:{onCellClick:c,onStatusClick:u,onToggleGameMode:d,onToggleSoundEffects:f,onCellLongPress:s}}})),R=B.Provider,D=B.useContainer;function X(e,n){for(var t=e.split(/\./g),r=n.split(/\./g);t.length||r.length;){var a=Number(t.shift()),i=Number(r.shift());if(a!==i)return a>i||isNaN(i)}return!1}var H=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){throw new Error("Timeout exceeded")};return function(){var t=(0,C.Z)((0,M.Z)().mark((function t(r){var a,i;return(0,M.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=window.setTimeout(n,e),t.next=3,fetch(r);case 3:return i=t.sent,window.clearTimeout(a),t.abrupt("return",i);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};function V(){return J.apply(this,arguments)}function J(){return(J=(0,C.Z)((0,M.Z)().mark((function e(){var n,t;return(0,M.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.caches){e.next=7;break}return e.next=3,window.caches.keys();case 3:return n=e.sent,t=n.map((function(e){return window.caches.delete(e)})),e.next=7,Promise.all(t);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){return W.apply(this,arguments)}function W(){return(W=(0,C.Z)((0,M.Z)().mark((function e(){var n,r,a,i,o;return(0,M.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=H(5e3,(function(){throw new Error("Timeout reached while fetching meta.json")})),e.next=4,n("meta.json?t=".concat(Date.now()));case 4:return r=e.sent,e.next=7,r.json();case 7:return a=e.sent,i=a.version,o=t.g.appVersion,e.abrupt("return",X(i,o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(){window.location.reload()}function q(){return K.apply(this,arguments)}function K(){return(K=(0,C.Z)((0,M.Z)().mark((function e(){return(0,M.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V();case 3:window.setTimeout($,300),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log("Failed to purge cache",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function Q(){return Y.apply(this,arguments)}function Y(){return(Y=(0,C.Z)((0,M.Z)().mark((function e(){return(0,M.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U();case 3:if(!e.sent||!window.confirm("A new version is available, would you like to update?")){e.next=7;break}return e.next=7,q();case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("Failed to check for updates:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}var ee,ne,te,re,ae,ie,oe,le,ce,se,ue,de=18e5;var fe=["title","titleId"];function me(){return me=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},me.apply(this,arguments)}function he(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}function pe(e,n){var t=e.title,r=e.titleId,a=he(e,fe);return l.createElement("svg",me({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",ref:n,"aria-labelledby":r},a),t?l.createElement("title",{id:r},t):null,ee||(ee=l.createElement("defs",null)),ne||(ne=l.createElement("circle",{cx:256,cy:256,r:256,fill:"#ffe17d"})),te||(te=l.createElement("g",{fill:"#ffd164"},l.createElement("ellipse",{cx:156.9,cy:247.7,rx:74.3,ry:66.1}),l.createElement("ellipse",{cx:355.1,cy:247.7,rx:74.3,ry:66.1}),l.createElement("path",{d:"M293 475A256 256 0 0195 57a255 255 0 10360 360c-44 36-101 58-162 58z"}))),re||(re=l.createElement("path",{fill:"#5a4650",d:"M229 229l-13-10a49 49 0 0180 0l-13 9a33 33 0 00-54 1z"})),ae||(ae=l.createElement("path",{fill:"#6e5a64",d:"M157 165c-9 0-18 2-27 5-7 2-14 3-22 3H74c-4 0-8 4-8 9v16c0 5 3 10 7 13l2 2c5 3 8 8 8 14v4c0 37 33 66 74 66s74-29 74-66-33-66-74-66z"})),ie||(ie=l.createElement("g",{fill:"#aa7346"},l.createElement("path",{d:"M256 398c-42 0-83-20-107-53a10 10 0 0116-13 113 113 0 00182 0 10 10 0 1116 13c-24 33-64 53-107 53zM182 151h-50a10 10 0 110-21h50a10 10 0 110 21zM380 151h-50a10 10 0 110-21h50a10 10 0 110 21z"}))),oe||(oe=l.createElement("path",{fill:"#5a4650",d:"M157 281c-32 0-58-22-58-50 0-27 26-49 58-49s58 22 58 49c0 28-26 50-58 50z"})),le||(le=l.createElement("path",{fill:"#84737b",d:"M157 206c22 0 41 6 56 14-6-22-29-38-56-38s-50 16-56 38c14-8 34-14 56-14z"})),ce||(ce=l.createElement("path",{fill:"#6e5a64",d:"M281 231c0 37 33 66 74 66s74-29 74-66v-4c0-6 3-11 8-14l2-2c4-3 7-8 7-13v-16c0-5-4-9-8-9h-34c-8 0-15-1-22-3-9-3-18-5-27-5-41 0-74 30-74 66z"})),se||(se=l.createElement("path",{fill:"#5a4650",d:"M297 231c0-27 26-49 58-49s58 22 58 49c0 28-26 50-58 50s-58-22-58-50z"})),ue||(ue=l.createElement("path",{fill:"#84737b",d:"M355 206c-22 0-41 6-56 14 6-22 29-38 56-38s50 16 56 38c-14-8-34-14-56-14z"})))}var ve,ge,we,be,xe,ye,Ee,je,ke,Oe=l.forwardRef(pe),Ze=(t.p,["title","titleId"]);function Me(){return Me=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Me.apply(this,arguments)}function Ce(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}function Se(e,n){var t=e.title,r=e.titleId,a=Ce(e,Ze);return l.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",ref:n,"aria-labelledby":r},a),t?l.createElement("title",{id:r},t):null,ve||(ve=l.createElement("defs",null)),ge||(ge=l.createElement("path",{fill:"#dbd9dc",d:"M249 0A243 243 0 0017 244v144c0 32 25 58 57 58h42c9 0 16 7 16 16v25c0 14 11 25 25 25h198c14 0 25-11 25-25v-25c0-9 7-16 16-16h42c32 0 57-26 57-58V239C495 105 385-4 249 0z"})),we||(we=l.createElement("path",{fill:"#c9c6ca",d:"M140 421c-22 0-41-18-41-41V244C99 126 184 24 297 4c-21-4-44-5-67-3A243 243 0 0017 244v144c0 32 25 58 57 58h42c9 0 16 7 16 16v25c0 14 11 25 25 25h25v-50c0-22-19-41-42-41z"})),be||(be=l.createElement("g",{fill:"#867e88"},l.createElement("path",{d:"M248 365l-26 63c-3 7 4 13 11 11l17-7c4-2 8-2 12 0l17 7c7 2 14-4 11-11l-26-63c-3-7-13-7-16 0z"}),l.createElement("circle",{cx:148.7,cy:289,r:74.3}))),xe||(xe=l.createElement("path",{fill:"#6f6571",d:"M149 248c35 0 65 24 72 58a74 74 0 10-145 0c8-34 37-58 73-58z"})),ye||(ye=l.createElement("circle",{cx:363.4,cy:289,r:74.3,fill:"#867e88"})),Ee||(Ee=l.createElement("g",{fill:"#6f6571"},l.createElement("path",{d:"M363 248c36 0 65 24 73 58a74 74 0 10-145 0c7-34 37-58 72-58zM238 401a49 49 0 0136 0l6 2-16-38c-3-7-13-7-16 0l-16 38 6-2z"}))),je||(je=l.createElement("g",{fill:"#c9c6ca"},l.createElement("path",{d:"M223 512h-17v-25c0-4 4-8 9-8 4 0 8 4 8 8v25zM306 512h-17v-25c0-4 4-8 8-8 5 0 9 4 9 8v25zM347 512h-17v-25c0-4 4-8 9-8 4 0 8 4 8 8v25zM264 512h-16v-25c0-4 3-8 8-8s8 4 8 8v25z"}))),ke||(ke=l.createElement("path",{fill:"#b7b2b8",d:"M182 512h-17v-25c0-4 4-8 8-8 5 0 9 4 9 8v25z"})))}var ze,Le,Te,_e,Pe,Fe,Ie,Ge,Ae,Ne=l.forwardRef(Se),Be=(t.p,["title","titleId"]);function Re(){return Re=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Re.apply(this,arguments)}function De(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}function Xe(e,n){var t=e.title,r=e.titleId,a=De(e,Be);return l.createElement("svg",Re({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",ref:n,"aria-labelledby":r},a),t?l.createElement("title",{id:r},t):null,ze||(ze=l.createElement("defs",null)),Le||(Le=l.createElement("circle",{cx:256,cy:256,r:256,fill:"#ffe17d"})),Te||(Te=l.createElement("g",{fill:"#ffd164"},l.createElement("path",{d:"M293 475A256 256 0 0195 57a255 255 0 10360 360c-44 36-101 58-162 58z"}),l.createElement("path",{d:"M182 512c9 0 16-7 16-17 0-9-7-16-16-16h8c9 0 16-7 16-17 0-9-7-16-16-16h8c9 0 17-7 17-17 0-9-8-16-17-16h91c9 0 17-7 17-17 0-9-8-16-17-16H140c-13 0-24-11-24-25v-49c0-10-8-17-17-17s-16 7-16 17v40c0 11-4 22-11 31l-8 10c-9 11-14 26-14 41v34c0 28 22 50 49 50h83z"}))),_e||(_e=l.createElement("g",{fill:"#ffc350"},l.createElement("path",{d:"M198 495H99c-18 0-33-14-33-33v-34c0-11 4-22 11-31l8-10c9-11 14-26 14-41v-57c-9 0-16 7-16 17v40c0 11-4 22-11 31l-8 10c-9 11-14 26-14 41v34c0 28 22 50 49 50h83c9 0 16-7 16-17zM306 396H190a8 8 0 100 17h99c9 0 17-7 17-17zM173 438c0 4 4 8 9 8h16c9 0 17-7 17-17h-33c-5 0-9 4-9 9z"}),l.createElement("path",{d:"M165 471c0 4 4 8 8 8h17c9 0 16-7 16-17h-33c-4 0-8 4-8 9z"}))),Pe||(Pe=l.createElement("g",{fill:"#aa7346"},l.createElement("path",{d:"M297 341l-4-1c-1-1-58-29-120-30-6 0-10-5-10-11s5-10 10-10c68 2 126 31 129 32a10 10 0 01-5 20zM190 134l-6-2c-2-1-38-29-80-7a10 10 0 01-10-19c55-27 100 8 102 10a10 10 0 01-6 18zM306 151a10 10 0 01-2-21l82-16a10 10 0 114 20l-82 17h-2z"}))),Fe||(Fe=l.createElement("path",{fill:"#7d5046",d:"M152 208c-11-1-19-12-18-23l2-16c1-12 12-20 23-18 11 1 19 11 18 23l-2 16c-1 11-12 19-23 18z"})),Ie||(Ie=l.createElement("path",{fill:"#9c6846",d:"M159 151h-4l-4 28a12 12 0 1025 3l1-8c1-12-7-22-18-23z"})),Ge||(Ge=l.createElement("path",{fill:"#7d5046",d:"M325 226c-11-1-19-12-18-23l2-16c1-12 12-20 23-18 11 1 19 11 18 23l-2 16c-1 11-12 19-23 18z"})),Ae||(Ae=l.createElement("path",{fill:"#9c6846",d:"M332 169h-4l-4 28a12 12 0 1025 3l1-8c1-12-7-22-18-23z"})))}var He,Ve,Je,Ue,We,$e,qe,Ke,Qe,Ye,en,nn,tn=l.forwardRef(Xe),rn=(t.p,t(178)),an=t(6386),on={primary:"#FFD400",secondary:"#3482B9",positive:"#49C04A",negative:"#D03930",neutral:"#AAA",light:"#ABE0F9",muted:"#EAEAEA",hotpink:"#FC8BA4",black:"#333",white:"#FFF",gray:"#CCC",dark:"#666",shadow:"rgba(0, 0, 0, 0.4)"},ln={colors:on,radii:{default:"0.2rem",sm:"0.1rem",md:"0.2rem",lg:"0.3rem",xl:"0.4rem",xxl:"0.6rem",xxxl:"1rem",round:"1000px"},fontSizes:{default:18,xs:18*.6,sm:14.4,md:18,lg:18*1.2},fontFamilies:{display:"'Black Ops One', monospace",default:"'Lato', sans-serif",voice:"'Vollkorn', serif"},shadows:{default:"0 1px 2px ".concat(on.shadow),inset:"inset 1px 0 2px",top:"0 -2px 6px ".concat(on.shadow),none:"none"},animations:{appear:(0,r.F4)(He||(He=(0,rn.Z)(["\n    0% {\n      transform: scale(0.1);\n      opacity: 0.1;\n    }\n  "]))),glow:(0,r.F4)(Ve||(Ve=(0,rn.Z)(["\n    70% {\n      opacity: 1;\n      background-color: ",";\n    }\n  "])),(0,an._j)(.2,on.negative))}},cn=t(755),sn=t.n(cn),un=sn().div(Je||(Je=(0,rn.Z)(["\n  h-screen flex flex-col \n  items-center\n bg-muted\n"]))),dn=sn().header(Ue||(Ue=(0,rn.Z)(["\n  flex items-center justify-center \n  w-full h-appbar \n  bg-black shadow-md\n"]))),fn=sn().div(We||(We=(0,rn.Z)(["\n  flex flex-row\n  items-center \n  justify-between\n  px-[0.5rem]\n  w-board\n"]))),mn=sn().span($e||($e=(0,rn.Z)(["\n  absolute\n  text-[0.375em]\n  left-[8.75em]\n  bottom-[-0.75em]\n  before:content-['v']\n"]))),hn=sn().div(qe||(qe=(0,rn.Z)(["\n  font-display text-primary text-[2rem] \n  flex flex-1 cursor-pointer\n  relative\n"]))),pn=sn().nav(Ke||(Ke=(0,rn.Z)(["\n  flex flex-1 flex-col items-end\n"]))),vn=sn().div(Qe||(Qe=(0,rn.Z)(["\n  bg-shadow\n  shadow-lg shadow-black/60\n  rounded-full\n  w-16 h-16\n  mt-4 p-2\n  cursor-pointer\n  ","\n"])),(function(e){return e.$isGameOver?"animate-glow":""})),gn=sn().main(Ye||(Ye=(0,rn.Z)(["content relative"]))),wn=function(e){return function(n){return function(t){var r="function"===typeof n?n(t):n;return t.theme[e][r]}}},bn=wn("colors"),xn=wn("radii"),yn=(wn("fontSizes"),wn("shadows")),En=(wn("fontFamilies"),wn("animations")),jn=r.ZP,kn=["title","titleId"];function On(){return On=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},On.apply(this,arguments)}function Zn(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}function Mn(e,n){var t=e.title,r=e.titleId,a=Zn(e,kn);return l.createElement("svg",On({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",ref:n,"aria-labelledby":r},a),t?l.createElement("title",{id:r},t):null,en||(en=l.createElement("defs",null)),nn||(nn=l.createElement("path",{d:"M256 5a257 257 0 00-81 501c13 3 18-5 18-12l-1-44c-71 16-86-34-86-34-12-30-28-38-28-38-24-16 1-16 1-16 26 2 39 27 39 27 23 39 60 28 75 21 2-16 9-28 16-34-57-7-116-29-116-127 0-28 10-51 26-69-3-7-11-33 3-68 0 0 21-7 70 26a244 244 0 01128 0c49-33 70-26 70-26 14 35 6 61 3 68 16 18 26 41 26 69 0 99-60 120-117 127 10 8 18 23 18 47v71c0 7 4 15 17 12A257 257 0 00256 5z"})))}var Cn,Sn,zn,Ln,Tn,_n,Pn,Fn,In,Gn,An,Nn=l.forwardRef(Mn),Bn=(t.p,t(8166)),Rn=sn()(Nn)(Cn||(Cn=(0,rn.Z)(["\n  w-8 h-8\n"]))),Dn=jn.div(Sn||(Sn=(0,rn.Z)(["\n  white-space: nowrap;\n  font-size: 0.9rem;\n"]))),Xn=jn.a(zn||(zn=(0,rn.Z)(["\n  border-radius: ",";\n  color: ",";\n  background: ",";\n  display: flex;\n  padding: 0.4rem;\n  width: 2.2rem;\n  height: 2.2rem;\n  overflow: hidden;\n  "," {\n    display: none;\n  }\n  justify-content: space-around;\n  align-items: center;\n  box-shadow: ",";\n  font-weight: 700;\n  text-decoration: none;\n  :hover {\n    "," {\n      display: flex;\n      animation: "," 0.3s ease;\n      padding: 0.4rem;\n    }\n    width: 12rem;\n    border-radius: 2rem;\n  }\n  transition: all 0.3s ease-in-out;\n  user-select: none;\n  outline: none;\n"])),xn("round"),bn("secondary"),bn("white"),Dn,yn("default"),Dn,En("appear")),Hn=function(){return(0,Bn.jsxs)(Xn,{target:"_blank",rel:"noreferrer",href:"https://github.com/alanrsoares/ts-mines","aria-label":"got to the project's github page",children:[(0,Bn.jsx)(Rn,{}),(0,Bn.jsx)(Dn,{children:"@alanrsoares/ts-mines"})]})},Vn=["title","titleId"];function Jn(){return Jn=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Jn.apply(this,arguments)}function Un(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}function Wn(e,n){var t=e.title,r=e.titleId,a=Un(e,Vn);return l.createElement("svg",Jn({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",ref:n,"aria-labelledby":r},a),t?l.createElement("title",{id:r},t):null,Ln||(Ln=l.createElement("defs",null)),Tn||(Tn=l.createElement("circle",{cx:256.3,cy:256,r:245,fill:"#fec753"})),_n||(_n=l.createElement("path",{fill:"#35528c",d:"M256 105C133 105 30 217 3 248c-4 5-4 11 0 16 27 31 130 143 253 143s226-112 253-143c4-5 4-11 0-16-27-31-130-143-253-143z"})),Pn||(Pn=l.createElement("path",{fill:"#1f3a60",d:"M42 256c0-24 96-151 214-151C134 105 31 215 4 247c-5 5-5 13 0 18 27 32 130 142 252 142-118 0-214-127-214-151z"})),Fn||(Fn=l.createElement("circle",{cx:256,cy:256,r:132,fill:"#99d3ff"})),In||(In=l.createElement("path",{fill:"#5bb3ce",d:"M176 256c0-64 46-117 106-129a133 133 0 00-158 129 132 132 0 00158 129c-60-12-106-65-106-129z"})),Gn||(Gn=l.createElement("circle",{cx:254.6,cy:256,r:65.6,fill:"#1f3a60"})),An||(An=l.createElement("circle",{cx:308.1,cy:225.6,r:27.9,fill:"#dcf3ff"})))}var $n,qn,Kn,Qn,Yn,et=l.forwardRef(Wn),nt=(t.p,["title","titleId"]);function tt(){return tt=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},tt.apply(this,arguments)}function rt(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}function at(e,n){var t=e.title,r=e.titleId,a=rt(e,nt);return l.createElement("svg",tt({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",ref:n,"aria-labelledby":r},a),t?l.createElement("title",{id:r},t):null,$n||($n=l.createElement("defs",null)),qn||(qn=l.createElement("path",{fill:"#fc644f",d:"M389 271l121 163c-91 30-300 24-381-18V126c80 41 290 49 381 18L389 271z"})),Kn||(Kn=l.createElement("path",{fill:"#f1543f",d:"M129 415l65-32-48-145-17 24z"})),Qn||(Qn=l.createElement("path",{fill:"#ff7058",d:"M41 47v289s75-20 152 46V94C116 27 41 47 41 47z"})),Yn||(Yn=l.createElement("path",{fill:"#40596b",d:"M32 0C16 0 2 13 2 29v483h59V29C61 13 48 0 32 0z"})))}var it,ot,lt,ct,st,ut,dt,ft,mt,ht,pt,vt,gt,wt,bt,xt,yt,Et=l.forwardRef(at),jt=(t.p,function(){return(0,Bn.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",style:{height:"2rem",width:"2rem"},fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,Bn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z",clipRule:"evenodd"}),(0,Bn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2"})]})}),kt=function(){return(0,Bn.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",style:{height:"2rem",width:"2rem"},fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Bn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"})})},Ot=jn.div.attrs({role:"button"})(it||(it=(0,rn.Z)(["\n  cursor: pointer;\n"]))),Zt=function(e){return(0,Bn.jsx)(Ot,{onClick:function(){return e.onChange(Boolean(e.on))},children:e.on?(0,Bn.jsx)(kt,{}):(0,Bn.jsx)(jt,{})})},Mt=jn(et)(ot||(ot=(0,rn.Z)(["\n  width: 1rem;\n  height: 1rem;\n"]))),Ct=jn(Et)(lt||(lt=(0,rn.Z)(["\n  width: 1rem;\n  height: 1rem;\n"]))),St=jn.div(ct||(ct=(0,rn.Z)(["\n  border-radius: ",";\n  background-color: ",";\n  width: 1.8rem;\n  height: 1.8rem;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 0.1rem;\n  transition-delay: 0.3s;\n  transition: background-color 0.2s ease-in-out;\n  box-shadow: ",";\n"])),xn("round"),(function(e){return e.active?bn("gray")(e):(0,an._j)(.1,bn("gray")(e))}),yn((function(e){return e.active?"inset":"default"}))),zt=jn.button(st||(st=(0,rn.Z)(["\n  border: none;\n  background-color: ",";\n  height: 2.8rem;\n  width: 4rem;\n  ","\n  box-shadow: ",";\n  outline: none;\n  transition: all 0.1s ease;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  transition: all 0.3s ease-in-out;\n  cursor: pointer;\n"])),(function(e){var n=bn(e.color)(e);return e.active?n:(0,an._j)(.5,n)}),(function(e){return"\n      border-top-".concat(e.side,"-radius: 2rem;\n      border-bottom-").concat(e.side,"-radius: 2rem;\n    ")}),yn((function(e){return e.active?"inset":"default"}))),Lt=sn().div(ut||(ut=(0,rn.Z)(["\n  flex\n"]))),Tt=sn().div(dt||(dt=(0,rn.Z)(["\n  flex items-center justify-center\n  w-full h-appbar \n  bg-dark text-white\n  shadow-md fixed bottom-0\n"]))),_t=function(e){return(0,Bn.jsx)(Tt,{children:(0,Bn.jsxs)(fn,{children:[(0,Bn.jsx)(Hn,{}),(0,Bn.jsx)("div",{children:(0,Bn.jsx)(Zt,{on:e.soundEffects,onChange:e.onToggleSoundEffects})}),(0,Bn.jsxs)(Lt,{children:[(0,Bn.jsx)(zt,{side:"left",color:"white",active:"defuse"===e.gameMode,onClick:e.onToggleGameMode,"aria-label":"Toggle game mode",children:(0,Bn.jsx)(St,{active:"defuse"===e.gameMode,children:(0,Bn.jsx)(Ct,{})})}),(0,Bn.jsx)(zt,{side:"right",color:"white",active:"reveal"===e.gameMode,onClick:e.onToggleGameMode,"aria-label":"Toggle game mode",children:(0,Bn.jsx)(St,{active:"reveal"===e.gameMode,children:(0,Bn.jsx)(Mt,{})})})]})]})})},Pt=t(6594),Ft=jn(t(2127).r)(ft||(ft=(0,rn.Z)(["\n  width: 1.4rem;\n  height: 1.4rem;\n  animation: "," 0.2s ease-in-out;\n"])),En("appear")),It=jn(Et)(mt||(mt=(0,rn.Z)(["\n  width: 1.4rem;\n  height: 1.4rem;\n  animation: "," 0.2s ease-in-out;\n"])),En("appear")),Gt={0:"white",1:"blue",2:"green",3:"red",4:"darkblue",5:"darkgreen",6:"darkred",7:"purple",8:"darkpurple"},At=jn.button(ht||(ht=(0,rn.Z)(["\n  width: 1.8rem;\n  height: 1.8rem;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  box-shadow: ",";\n  border-radius: ",";\n  margin: 0.2rem;\n  padding: 0.2rem;\n  background: ",";\n  appearance: none;\n  border: none;\n  transition: all 0.2s ease-in-out;\n  font-weight: bold;\n  user-select: none;\n  outline: none;\n  cursor: ",";\n  ",";\n  :active {\n    opacity: 0.8;\n    box-shadow: 0 0 0 0.125rem rgba(0, 0, 0, 0.2);\n  }\n"])),yn((function(e){return e.revealed?"none":"default"})),xn("lg"),bn((function(e){var n=e.revealed,t=e.kind,r=e.active;return n?"mine"===t&&r?"negative":"white":"gray"})),(function(e){return e.active?"auto":"pointer"}),(function(e){var n=e.children;return"number"===typeof n?(0,r.iv)(pt||(pt=(0,rn.Z)(["\n          color: ",";\n        "])),Gt[n]):void 0})),Nt=function(e){var n=(0,l.useMemo)((function(){if(e.defused)return(0,Bn.jsx)(It,{});if(!e.revealed||"safe"===e.kind)return null;switch(e.kind){case"empty":return e.surroundingMines;case"mine":return(0,Bn.jsx)(Ft,{})}}),[e]),t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,t=(0,l.useState)(!1),r=(0,o.Z)(t,2),a=r[0],i=r[1],c=(0,l.useRef)(0),s=(0,l.useCallback)((function(){window.clearTimeout(c.current)}),[c]),u=(0,l.useCallback)((function(){i(!0)}),[]),d=(0,l.useCallback)((function(){i(!1)}),[]);return(0,l.useEffect)((function(){return a?c.current=window.setTimeout(e,n):s(),s}),[a]),{onMouseDown:u,onMouseUp:d,onMouseLeave:d,onTouchStart:u,onTouchEnd:d,onMouseMove:s}}(e.onLongPress,400);return(0,Bn.jsx)(At,(0,i.Z)((0,i.Z)((0,i.Z)({},(0,Pt.Z)(["onLongPress"],e)),t),{},{active:e.active,children:n}))},Bt=sn().div(vt||(vt=(0,rn.Z)(["\n  flex flex-col\n"]))),Rt=sn().div(gt||(gt=(0,rn.Z)(["\n  flex\n"]))),Dt=function(e){var n=(0,l.useCallback)((function(n){return function(){return e.onTileClick(n)}}),[e]),t=(0,l.useCallback)((function(n){return function(){return e.onTileLongPress(n)}}),[e]);return(0,Bn.jsx)(Bt,{children:e.grid.map((function(r,a){return(0,Bn.jsx)(Rt,{children:r.map((function(r,a){var o,l;return(0,Bn.jsx)(Nt,(0,i.Z)((0,i.Z)({onClick:n(r),onLongPress:t(r)},r.value),{},{active:r.row===(null===(o=e.activeCell)||void 0===o?void 0:o.row)&&r.column===(null===(l=e.activeCell)||void 0===l?void 0:l.column)}),"tile-".concat(a))}))},"row-".concat(a))}))})},Xt=jn.div(wt||(wt=(0,rn.Z)(["\n  display: flex;\n  color: ",";\n  min-width: 8rem;\n  flex-direction: column;\n  align-items: center;\n  background: ",";\n  border-radius: ",";\n  height: 3rem;\n  justify-content: space-around;\n  @media screen and (max-width: 360px) {\n    min-width: 6rem;\n  }\n"])),bn("primary"),bn("shadow"),xn("lg")),Ht=jn.div(bt||(bt=(0,rn.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: ",";\n  font-size: 1.6rem;\n"])),bn("primary")),Vt=jn.div(xt||(xt=(0,rn.Z)(["\n  height: 0.3rem;\n  overflow: hidden;\n  border-radius: ",";\n  width: 80%;\n  align-self: center;\n  background: linear-gradient(\n    to right,\n    "," 0%,\n    "," ","%,\n    "," ","%,\n    "," 100%\n  );\n"])),xn("default"),bn("positive"),bn("positive"),(function(e){return e.progress}),bn("white"),(function(e){return e.progress}),bn("white")),Jt=jn(et)(yt||(yt=(0,rn.Z)(["\n  width: 0.9rem;\n  height: 0.9rem;\n  margin-right: 0.5rem;\n"]))),Ut=function(e){return(0,Bn.jsxs)(Xt,{children:[(0,Bn.jsxs)(Ht,{children:[(0,Bn.jsx)(Jt,{})," ",e.score]}),(0,Bn.jsx)(Vt,{progress:e.progress})]})},Wt={new:(0,Bn.jsx)(tn,{}),won:(0,Bn.jsx)(Oe,{}),over:(0,Bn.jsx)(Ne,{})},$t=function(e){return Wt[e.status]},qt=function(){};function Kt(){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de;(0,l.useEffect)((function(){Q();var n=window.setInterval(Q,e);return function(){window.clearInterval(n)}}),[e])}(de),function(e){var n=(0,l.useCallback)((function(n){n.preventDefault(),e()}),[e]);(0,l.useEffect)((function(){return window.addEventListener("contextmenu",n),function(){window.removeEventListener("contextmenu",n)}}),[n])}(qt);var e=D(),n=e.state,r=e.handlers;return(0,Bn.jsxs)(un,{children:[(0,Bn.jsx)(dn,{children:(0,Bn.jsxs)(fn,{children:[(0,Bn.jsxs)(hn,{children:["[MINES]",(0,Bn.jsx)(mn,{children:t.g.appVersion})]}),(0,Bn.jsx)(vn,{$isGameOver:"over"===n.gameStatus,onClick:r.onStatusClick,children:(0,Bn.jsx)($t,{status:n.gameStatus})}),(0,Bn.jsx)(pn,{children:(0,Bn.jsx)(Ut,{score:n.score,progress:n.progress})})]})}),(0,Bn.jsx)(gn,{children:(0,Bn.jsx)(Dt,{grid:n.grid,activeCell:n.activeCell,onTileClick:r.onCellClick,onTileLongPress:r.onCellLongPress})}),(0,Bn.jsxs)("p",{className:"text-xs",children:[n.gameLevel," - ",n.boardSize]}),(0,Bn.jsx)(_t,{onToggleGameMode:r.onToggleGameMode,onToggleSoundEffects:r.onToggleSoundEffects,gameMode:n.gameMode,soundEffects:n.enableSFX})]})}function Qt(){return(0,Bn.jsx)(r.f6,{theme:ln,children:(0,Bn.jsx)(R,{children:(0,Bn.jsx)(Kt,{})})})}}}]);
//# sourceMappingURL=641.0d16cfb2.chunk.js.map