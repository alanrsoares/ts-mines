{"version":3,"sources":["lib/storage.ts","lib/StorageAdapter.ts","lib/Grid.ts","lib/game.ts","lib/state.ts","lib/hooks.ts","assets/skull.svg","assets/thinking.svg","assets/cool.svg","ui/theme.ts","ui/styled.ts","ui/components/core.ts","assets/flag.svg","ui/components/GridTile.tsx","ui/components/Grid.tsx","assets/github.svg","ui/components/Github.tsx","assets/eye.svg","ui/components/Footer.tsx","ui/components/Score.tsx","App.tsx","lib/useUpdateChecker.ts"],"names":["namespace","this","value","path","localStorage","setItem","JSON","stringify","defaultValue","getItem","parse","isIndexOutOfBounds","gridSize","min","max","isBetween","isOutOfBounds","cell","dimensions","row","rows","column","columns","Grid","_dimensions","_grid","length","Array","isArray","fill","y","x","push","Error","matrix","previous","getCell","reduce","acc","fn","nextMatrix","map","cells","from","slice","revealTile","tile","assoc","revealMine","kind","isMine","makeNewGrid","chanceOfMines","make","Math","random","surroundingMines","revealed","self","getCellNeighbours","filter","didWin","grid","snapshot","flat","summary","flagged","defused","mines","INITIAL_STATE","gameStatus","gameMode","activeCell","undefined","score","Game","reducer","state","action","type","payload","mode","includes","partialNextState","nextGrid","updateCell","getNextGrid","cellClicked","forEach","neighbourCell","neighbour","nextScore","c","useGameState","cacheKey","defaultState","useReducer","storage","read","setState","useEffect","persist","useCachedReducer","dispatch","progress","useMemo","onCellClick","useCallback","onCellLongPress","onStatusClick","onToggleGameMode","handlers","_extends","Object","assign","target","i","arguments","source","key","prototype","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_ref2","createElement","d","_ref4","_ref5","cx","cy","r","_ref6","_ref7","_ref8","_ref9","_ref10","_ref","svgRef","title","props","viewBox","ref","ForwardRef","forwardRef","rx","ry","_ref11","_ref12","colors","primary","secondary","positive","negative","neutral","light","muted","hotpink","black","white","gray","dark","shadow","theme","radii","default","sm","md","lg","xl","xxl","xxxl","round","fontSizes","xs","baseFontSize","fontFamilies","display","voice","shadows","inset","top","none","animations","appear","keyframes","glow","darken","getThemeProp","baseUseTheme","lens","$value","getColor","getRadius","getShadow","getFontFamily","getAnimation","styled","baseCSS","Root","div","AppBar","header","Clamp","Brand","Controls","nav","StatusDisplay","p","isGameOver","css","Content","main","Mine","MineIcon","Flag","FlagIcon","numberColors","0","1","2","3","4","5","6","7","8","GridTileContainer","active","children","GridTile","content","longPressProps","callback","ms","useState","running","setRunning","timeoutIdRef","useRef","cancelTimeout","clearTimeout","current","start","stop","setTimeout","onMouseDown","onMouseUp","onMouseLeave","onTouchStart","onTouchEnd","onMouseMove","useLongPress","onLongPress","omit","GridContainer","GridRow","GridComponent","handleClick","onTileClick","handleLongPress","onTileLongPress","onClick","GithubIcon","GithubSVG","GithubLabel","GithubBadge","a","Github","rel","href","aria-label","Eye","EyeIcon","Circle","Button","button","color","side","ButtonGroup","Footer","ProgressContainer","ProgressLine","ProgressIcon","Score","STATUS_ICONS","new","won","over","StatusIcon","status","NO_OP","App","useUpdateChecker","UPDATE_CHECK_INTERVAL","onContextMenu","e","preventDefault","window","addEventListener","removeEventListener","useRightClick","semverGreaterThan","latestVersion","currentVersion","latestParts","split","currentParts","Number","shift","b","isNaN","fetchWithTimeout","timeout","onTimeout","url","timeoutHandle","fetch","response","purgeCache","caches","deleteKeys","delete","Promise","all","checkForAppUpdates","fetchWithTimeoutHandler","Date","now","json","meta","version","global","appVersion","forceReload","location","reload","tryInstallUpdate","console","log","tryCheckForUpdates","confirm","interval","intervalId","setInterval","clearInterval"],"mappings":"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","file":"static/js/4.27ed3f91.chunk.js","sourcesContent":["import StorageAdapter from \"lib/StorageAdapter\";\n\nexport const NAMESPACE = \"@TS-MINES\";\n\nexport default new StorageAdapter(NAMESPACE);\n","export default class StorageAdapter {\r\n  private namespace = \"\";\r\n\r\n  constructor(namespace: string) {\r\n    this.namespace = namespace;\r\n  }\r\n\r\n  public persist<T extends {}>(value: T, path: string = \"\") {\r\n    localStorage.setItem(\r\n      `${this.namespace}${path}`,\r\n      JSON.stringify(value ?? null)\r\n    );\r\n  }\r\n\r\n  public read<T>(defaultValue: T, path: string = \"\"): T {\r\n    const value = localStorage.getItem(`${this.namespace}${path}`);\r\n\r\n    return value !== null ? JSON.parse(value) : defaultValue;\r\n  }\r\n}\r\n","export interface Coordinates {\n  row: number;\n  column: number;\n}\n\nexport interface Dimensions {\n  rows: number;\n  columns: number;\n}\n\nexport type FillFn<T> = (cell: Coordinates, previousValue?: T) => T;\n\nexport interface Cell<T> extends Coordinates {\n  value: T;\n}\n\nexport type Row<T> = Cell<T>[];\n\nexport type Matrix<T> = Row<T>[];\n\nconst isBetween = (min: number, max: number, value: number) =>\n  value >= min && value < max;\n\nconst isIndexOutOfBounds = (value: number, gridSize: number) =>\n  !isBetween(0, gridSize, value);\n\nconst isOutOfBounds = (\n  cell: { row: number; column: number },\n  dimensions: Dimensions\n) =>\n  isIndexOutOfBounds(cell.row, dimensions.rows) ||\n  isIndexOutOfBounds(cell.column, dimensions.columns);\n\nexport default class Grid<T = undefined> {\n  private _dimensions: Dimensions = {\n    rows: 0,\n    columns: 0\n  };\n  private _grid: Matrix<T> = [];\n\n  constructor(seed: Matrix<T>);\n  constructor(dimensions: Dimensions, fill: FillFn<T> | T);\n  constructor(...args: any[]) {\n    if (args.length === 1 && Array.isArray(args[0])) {\n      this._grid = args[0] as Matrix<T>;\n\n      const dimensions: Dimensions = {\n        rows: this._grid.length,\n        columns: this._grid[0].length\n      };\n\n      this._dimensions = dimensions;\n\n      return this;\n    }\n\n    if (typeof args[0] === \"object\" && args[0] !== null) {\n      const dimensions = args[0] as Dimensions;\n      const fill = args[1] as FillFn<T>;\n\n      const rows: Matrix<T> = [];\n\n      for (let y = 0; y < dimensions.rows; y++) {\n        const row: Row<T> = [];\n\n        for (let x = 0; x < dimensions.columns; x++) {\n          const value =\n            typeof fill === \"function\"\n              ? (fill as FillFn<T>)({\n                  row: y,\n                  column: x\n                })\n              : fill;\n\n          row.push({ row: y, column: x, value });\n        }\n\n        rows.push(row);\n      }\n\n      this._dimensions = dimensions;\n      this._grid = rows;\n\n      return this;\n    }\n\n    throw new Error(`Invalid argument: ${args[0]}`);\n  }\n\n  public static make<T>(seed: Matrix<T>): Grid<T>;\n  public static make<T>(dimensions: Dimensions, fill: FillFn<T> | T): Grid<T>;\n  public static make<T>(...args: any[]): Grid<T> {\n    return new Grid(args[0], args[1]);\n  }\n\n  public static from<U>(matrix: Matrix<U>) {\n    return new Grid(matrix);\n  }\n\n  public withSeed(matrix: Matrix<T>) {\n    this._grid = matrix;\n\n    return this;\n  }\n\n  public get snapshot() {\n    return this._grid.slice();\n  }\n\n  public updateCell(\n    { row, column }: Coordinates,\n    fill: FillFn<T> | T\n  ): Grid<T> {\n    const previous = this.getCell({ row, column });\n\n    const value =\n      typeof fill === \"function\"\n        ? (fill as FillFn<T>)({ row, column }, previous.value)\n        : fill;\n\n    this._grid[row][column] = { row, column, value };\n\n    return this;\n  }\n\n  public getCell({ row, column }: Coordinates) {\n    if (!isOutOfBounds({ row, column }, this._dimensions)) {\n      return this._grid[row][column];\n    }\n\n    throw new Error(`Invalid cell coordinates: row: ${row}; column: ${column}`);\n  }\n\n  public getCellNeighbours({ row, column }: Coordinates): Row<T> {\n    const neighbourCoordinates = [\n      // top-left\n      { row: row - 1, column: column - 1 },\n      // top-middle\n      { row: row - 1, column },\n      // top-right\n      { row: row - 1, column: column + 1 },\n      // middle-left\n      { row, column: column - 1 },\n      // middle-right\n      { row, column: column + 1 },\n      // bottom-left\n      { row: row + 1, column: column - 1 },\n      // bottom-middle\n      { row: row + 1, column },\n      // bottom-right\n      { row: row + 1, column: column + 1 }\n    ];\n\n    return neighbourCoordinates.reduce<Row<T>>((acc, cell) => {\n      if (!isOutOfBounds(cell, this._dimensions)) {\n        return [...acc, this.getCell(cell)];\n      }\n      return acc;\n    }, []);\n  }\n\n  public map<U>(fn: (value: T, cell: Cell<T>, self: Grid<T>) => U) {\n    const nextMatrix: Matrix<U> = this._grid.map(cells =>\n      cells.map(cell => ({ ...cell, value: fn(cell.value, cell, this) }))\n    );\n\n    return Grid.from(nextMatrix);\n  }\n}\n","import assoc from \"ramda/es/assoc\";\n\nimport Grid, { Matrix, Cell, Dimensions, FillFn } from \"./Grid\";\n\nexport type TileKind = \"safe\" | \"empty\" | \"mine\";\n\nexport type Tile = {\n  kind: TileKind;\n  revealed: boolean;\n  surroundingMines: number;\n  defused?: boolean;\n};\n\nexport type GameStatus = \"new\" | \"over\" | \"won\";\n\nexport type Mode = \"reveal\" | \"defuse\";\n\nexport const revealTile = (tile: Tile): Tile => assoc(\"revealed\", true, tile);\n\nexport const revealMine = (tile: Tile) =>\n  tile.kind === \"mine\" ? revealTile(tile) : tile;\n\nexport const getNextGrid = (matrix: Matrix<Tile>, cellClicked: Cell<Tile>) => {\n  const nextGrid = Grid.from(matrix);\n\n  const { value: tile } = cellClicked;\n\n  // reveal clicked tile\n  nextGrid.updateCell(cellClicked, revealTile(tile));\n\n  if (tile.kind !== \"safe\") {\n    return nextGrid;\n  }\n\n  nextGrid.getCellNeighbours(cellClicked).forEach((neighbourCell) => {\n    const { value: neighbour } = neighbourCell;\n\n    // skip revealed tiles\n    if (neighbour.revealed) {\n      return;\n    }\n\n    switch (neighbour.kind) {\n      case \"empty\":\n        nextGrid.updateCell(neighbourCell, revealTile(neighbour));\n        break;\n      case \"safe\":\n        return getNextGrid(nextGrid.snapshot, neighbourCell);\n    }\n  });\n\n  return nextGrid;\n};\n\nexport const isMine = (cell: Cell<Tile>) => cell.value.kind === \"mine\";\n\nexport const makeNewGrid = (dimensions: Dimensions, chanceOfMines: number) => {\n  const fill: FillFn<Tile> = () => ({\n    kind: Math.random() >= chanceOfMines / 100 ? \"mine\" : \"empty\",\n    surroundingMines: 0,\n    revealed: false,\n  });\n\n  return Grid.make<Tile>(dimensions, fill).map<Tile>((tile, cell, self) => {\n    if (tile.kind !== \"mine\") {\n      const neighbours = self.getCellNeighbours(cell);\n      const mines = neighbours.filter(isMine);\n      const surroundingMines = mines.length;\n\n      return {\n        ...tile,\n        surroundingMines,\n        kind: surroundingMines ? \"empty\" : \"safe\",\n      };\n    }\n\n    return tile;\n  });\n};\n\nexport const didWin = (grid: Grid<Tile>) => {\n  const cells = grid.snapshot.flat();\n\n  const summary = cells.reduce(\n    (acc, cell) => ({\n      flagged: cell.value.defused ? acc.flagged + 1 : acc.flagged,\n      revealed: cell.value.revealed ? acc.revealed + 1 : acc.revealed,\n      mines: cell.value.kind === \"mine\" ? acc.mines + 1 : acc.mines,\n    }),\n    { flagged: 0, revealed: 0, mines: 0 }\n  );\n\n  return (\n    summary.mines === summary.flagged &&\n    summary.revealed + summary.flagged === cells.length\n  );\n};\n","import { Reducer } from \"react\";\n\nimport * as Game from \"lib/game\";\nimport Grid, { Cell, Matrix } from \"lib/Grid\";\n\nexport interface State {\n  score: number;\n  gameStatus: Game.GameStatus;\n  gameMode: Game.Mode;\n  activeCell?: Cell<Game.Tile>;\n  grid: Matrix<Game.Tile>;\n}\n\nexport interface CellClickPayload {\n  cell: Cell<Game.Tile>;\n  mode?: Game.Mode;\n}\n\nexport type Action =\n  | { type: \"RESET\" }\n  | { type: \"TOGGLE_GAME_MODE\" }\n  | {\n      type: \"TOGGLE_CELL\";\n      payload: CellClickPayload;\n    };\n\nexport const INITIAL_STATE: State = {\n  gameStatus: \"new\",\n  gameMode: \"reveal\",\n  activeCell: undefined,\n  score: 0,\n  grid: Game.makeNewGrid({ rows: 20, columns: 30 }, 80).snapshot,\n};\n\nexport const reducer: Reducer<State, Action> = (state, action) => {\n  switch (action.type) {\n    case \"TOGGLE_GAME_MODE\":\n      return {\n        ...state,\n        gameMode: state.gameMode === \"defuse\" ? \"reveal\" : \"defuse\",\n      };\n    case \"RESET\":\n      return state.gameStatus !== \"over\"\n        ? state\n        : {\n            ...INITIAL_STATE,\n            grid: Game.makeNewGrid({ rows: 20, columns: 30 }, 80).snapshot,\n          };\n    case \"TOGGLE_CELL\": {\n      const { cell, mode } = action.payload;\n\n      if ([\"won\", \"over\"].includes(state.gameStatus)) {\n        return state;\n      }\n\n      const { value: tile } = cell;\n      const gameMode = mode ?? state.gameMode;\n      const partialNextState = { ...state, activeCell: action.payload.cell };\n\n      if (tile.revealed || tile.defused) {\n        return partialNextState;\n      }\n\n      switch (gameMode) {\n        case \"defuse\": {\n          if (tile.kind !== \"mine\") {\n            // reveal mines\n            const nextGrid = Grid.from(state.grid).updateCell(cell, {\n              ...tile,\n              revealed: true,\n            });\n\n            return {\n              ...partialNextState,\n              grid: nextGrid.map(Game.revealMine).snapshot,\n              gameStatus: \"over\",\n            };\n          }\n\n          const nextGrid = Grid.from(state.grid).updateCell(cell, {\n            ...tile,\n            defused: !tile.defused,\n          });\n\n          return {\n            ...partialNextState,\n            grid: nextGrid.snapshot,\n            gameStatus: Game.didWin(nextGrid) ? \"won\" : state.gameStatus,\n          };\n        }\n        case \"reveal\": {\n          if (tile.kind === \"mine\") {\n            // reveal mines\n            return {\n              ...partialNextState,\n              grid: Grid.from(state.grid).map(Game.revealMine).snapshot,\n              gameStatus: \"over\",\n            };\n          }\n\n          const nextGrid = Game.getNextGrid(state.grid, cell);\n          const nextScore = nextGrid.snapshot\n            .flat()\n            .filter((c) => c.value.revealed).length;\n\n          return {\n            ...partialNextState,\n            grid: nextGrid.snapshot,\n            score: nextScore,\n            gameStatus: Game.didWin(nextGrid) ? \"won\" : state.gameStatus,\n          };\n        }\n      }\n    }\n  }\n};\n","import {\n  useState,\n  useEffect,\n  useCallback,\n  useRef,\n  useMemo,\n  useReducer,\n  Dispatch,\n  Reducer,\n} from \"react\";\n\nimport storage from \"lib/storage\";\nimport * as Game from \"lib/game\";\nimport { State, Action, INITIAL_STATE, reducer } from \"lib/state\";\nimport { Cell } from \"./Grid\";\n\nexport function useCachedReducer<S, A>(\n  cacheKey: string,\n  defaultState: S,\n  reducer: Reducer<S, A>\n): [S, Dispatch<A>] {\n  const [state, setState] = useReducer(\n    reducer,\n    storage.read(defaultState, cacheKey)\n  );\n\n  useEffect(() => {\n    storage.persist<S>(state, cacheKey);\n  }, [state, cacheKey]);\n\n  return [state, setState];\n}\n\nexport function useLongPress(callback = () => {}, ms = 300) {\n  const [running, setRunning] = useState(false);\n  const timeoutIdRef = useRef(0);\n\n  const cancelTimeout = useCallback(() => {\n    clearTimeout(timeoutIdRef.current);\n  }, [timeoutIdRef]);\n\n  const start = useCallback(() => {\n    setRunning(true);\n  }, []);\n\n  const stop = useCallback(() => {\n    setRunning(false);\n  }, []);\n\n  useEffect(\n    () => {\n      if (running) {\n        timeoutIdRef.current = setTimeout(callback, ms);\n      } else {\n        cancelTimeout();\n      }\n\n      // cleanup\n      return cancelTimeout;\n    },\n\n    /* \n      Explicitly disable rules of hooks on the next line \n      to prevent the callback from being called multiple times\n    */\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [running]\n  );\n\n  return {\n    onMouseDown: start,\n    onMouseUp: stop,\n    onMouseLeave: stop,\n    onTouchStart: start,\n    onTouchEnd: stop,\n    onMouseMove: cancelTimeout,\n  };\n}\n\nexport function useRightClick<T extends () => void>(callback: T) {\n  const onContextMenu = useCallback(\n    (e: MouseEvent) => {\n      e.preventDefault();\n      callback();\n    },\n    [callback]\n  );\n\n  useEffect(() => {\n    window.addEventListener(\"contextmenu\", onContextMenu);\n\n    return () => {\n      window.removeEventListener(\"contextmenu\", onContextMenu);\n    };\n  }, [onContextMenu]);\n}\n\nexport function useGameState() {\n  const [state, dispatch] = useCachedReducer<State, Action>(\n    \"/state\",\n    INITIAL_STATE,\n    reducer\n  );\n\n  const progress = useMemo(\n    () => (state.score / (state.grid.length * state.grid[0].length)) * 100,\n    [state.score, state.grid]\n  );\n\n  const onCellClick = useCallback(\n    (cell: Cell<Game.Tile>, mode?: Game.Mode) => {\n      dispatch({ type: \"TOGGLE_CELL\", payload: { cell, mode } });\n    },\n    [dispatch]\n  );\n\n  const onCellLongPress = useCallback(\n    (cell: Cell<Game.Tile>) => {\n      dispatch({ type: \"TOGGLE_CELL\", payload: { cell, mode: \"defuse\" } });\n    },\n    [dispatch]\n  );\n\n  const onStatusClick = useCallback(() => {\n    dispatch({ type: \"RESET\" });\n  }, [dispatch]);\n\n  const onToggleGameMode = useCallback(() => {\n    dispatch({ type: \"TOGGLE_GAME_MODE\" });\n  }, [dispatch]);\n\n  return {\n    state: {\n      ...state,\n      progress,\n    },\n    handlers: {\n      onCellClick,\n      onStatusClick,\n      onToggleGameMode,\n      onCellLongPress,\n    },\n  };\n}\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"defs\", null);\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#dbd9dc\",\n  d: \"M249 0A243 243 0 0017 244v144c0 32 25 58 57 58h42c9 0 16 7 16 16v25c0 14 11 25 25 25h198c14 0 25-11 25-25v-25c0-9 7-16 16-16h42c32 0 57-26 57-58V239C495 105 385-4 249 0z\"\n});\n\nvar _ref4 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#c9c6ca\",\n  d: \"M140 421c-22 0-41-18-41-41V244C99 126 184 24 297 4c-21-4-44-5-67-3A243 243 0 0017 244v144c0 32 25 58 57 58h42c9 0 16 7 16 16v25c0 14 11 25 25 25h25v-50c0-22-19-41-42-41z\"\n});\n\nvar _ref5 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  fill: \"#867e88\"\n}, React.createElement(\"path\", {\n  d: \"M248 365l-26 63c-3 7 4 13 11 11l17-7c4-2 8-2 12 0l17 7c7 2 14-4 11-11l-26-63c-3-7-13-7-16 0z\"\n}), React.createElement(\"circle\", {\n  cx: 148.7,\n  cy: 289,\n  r: 74.3\n}));\n\nvar _ref6 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#6f6571\",\n  d: \"M149 248c35 0 65 24 72 58a74 74 0 10-145 0c8-34 37-58 73-58z\"\n});\n\nvar _ref7 =\n/*#__PURE__*/\nReact.createElement(\"circle\", {\n  cx: 363.4,\n  cy: 289,\n  r: 74.3,\n  fill: \"#867e88\"\n});\n\nvar _ref8 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  fill: \"#6f6571\"\n}, React.createElement(\"path\", {\n  d: \"M363 248c36 0 65 24 73 58a74 74 0 10-145 0c7-34 37-58 72-58zM238 401a49 49 0 0136 0l6 2-16-38c-3-7-13-7-16 0l-16 38 6-2z\"\n}));\n\nvar _ref9 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  fill: \"#c9c6ca\"\n}, React.createElement(\"path\", {\n  d: \"M223 512h-17v-25c0-4 4-8 9-8 4 0 8 4 8 8v25zM306 512h-17v-25c0-4 4-8 8-8 5 0 9 4 9 8v25zM347 512h-17v-25c0-4 4-8 9-8 4 0 8 4 8 8v25zM264 512h-16v-25c0-4 3-8 8-8s8 4 8 8v25z\"\n}));\n\nvar _ref10 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#b7b2b8\",\n  d: \"M182 512h-17v-25c0-4 4-8 8-8 5 0 9 4 9 8v25z\"\n});\n\nvar SvgSkull = function SvgSkull(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 512 512\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9, _ref10);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgSkull, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/skull.29919b5b.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"defs\", null);\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"circle\", {\n  cx: 256,\n  cy: 256,\n  r: 256,\n  fill: \"#ffe17d\"\n});\n\nvar _ref4 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  fill: \"#ffd164\"\n}, React.createElement(\"path\", {\n  d: \"M293 475A256 256 0 0195 57a255 255 0 10360 360c-44 36-101 58-162 58z\"\n}), React.createElement(\"path\", {\n  d: \"M182 512c9 0 16-7 16-17 0-9-7-16-16-16h8c9 0 16-7 16-17 0-9-7-16-16-16h8c9 0 17-7 17-17 0-9-8-16-17-16h91c9 0 17-7 17-17 0-9-8-16-17-16H140c-13 0-24-11-24-25v-49c0-10-8-17-17-17s-16 7-16 17v40c0 11-4 22-11 31l-8 10c-9 11-14 26-14 41v34c0 28 22 50 49 50h83z\"\n}));\n\nvar _ref5 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  fill: \"#ffc350\"\n}, React.createElement(\"path\", {\n  d: \"M198 495H99c-18 0-33-14-33-33v-34c0-11 4-22 11-31l8-10c9-11 14-26 14-41v-57c-9 0-16 7-16 17v40c0 11-4 22-11 31l-8 10c-9 11-14 26-14 41v34c0 28 22 50 49 50h83c9 0 16-7 16-17zM306 396H190a8 8 0 100 17h99c9 0 17-7 17-17zM173 438c0 4 4 8 9 8h16c9 0 17-7 17-17h-33c-5 0-9 4-9 9z\"\n}), React.createElement(\"path\", {\n  d: \"M165 471c0 4 4 8 8 8h17c9 0 16-7 16-17h-33c-4 0-8 4-8 9z\"\n}));\n\nvar _ref6 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  fill: \"#aa7346\"\n}, React.createElement(\"path\", {\n  d: \"M297 341l-4-1c-1-1-58-29-120-30-6 0-10-5-10-11s5-10 10-10c68 2 126 31 129 32a10 10 0 01-5 20zM190 134l-6-2c-2-1-38-29-80-7a10 10 0 01-10-19c55-27 100 8 102 10a10 10 0 01-6 18zM306 151a10 10 0 01-2-21l82-16a10 10 0 114 20l-82 17h-2z\"\n}));\n\nvar _ref7 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#7d5046\",\n  d: \"M152 208c-11-1-19-12-18-23l2-16c1-12 12-20 23-18 11 1 19 11 18 23l-2 16c-1 11-12 19-23 18z\"\n});\n\nvar _ref8 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#9c6846\",\n  d: \"M159 151h-4l-4 28a12 12 0 1025 3l1-8c1-12-7-22-18-23z\"\n});\n\nvar _ref9 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#7d5046\",\n  d: \"M325 226c-11-1-19-12-18-23l2-16c1-12 12-20 23-18 11 1 19 11 18 23l-2 16c-1 11-12 19-23 18z\"\n});\n\nvar _ref10 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#9c6846\",\n  d: \"M332 169h-4l-4 28a12 12 0 1025 3l1-8c1-12-7-22-18-23z\"\n});\n\nvar SvgThinking = function SvgThinking(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 512 512\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9, _ref10);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgThinking, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/thinking.eb8e855e.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"defs\", null);\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"circle\", {\n  cx: 256,\n  cy: 256,\n  r: 256,\n  fill: \"#ffe17d\"\n});\n\nvar _ref4 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  fill: \"#ffd164\"\n}, React.createElement(\"ellipse\", {\n  cx: 156.9,\n  cy: 247.7,\n  rx: 74.3,\n  ry: 66.1\n}), React.createElement(\"ellipse\", {\n  cx: 355.1,\n  cy: 247.7,\n  rx: 74.3,\n  ry: 66.1\n}), React.createElement(\"path\", {\n  d: \"M293 475A256 256 0 0195 57a255 255 0 10360 360c-44 36-101 58-162 58z\"\n}));\n\nvar _ref5 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#5a4650\",\n  d: \"M229 229l-13-10a49 49 0 0180 0l-13 9a33 33 0 00-54 1z\"\n});\n\nvar _ref6 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#6e5a64\",\n  d: \"M157 165c-9 0-18 2-27 5-7 2-14 3-22 3H74c-4 0-8 4-8 9v16c0 5 3 10 7 13l2 2c5 3 8 8 8 14v4c0 37 33 66 74 66s74-29 74-66-33-66-74-66z\"\n});\n\nvar _ref7 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  fill: \"#aa7346\"\n}, React.createElement(\"path\", {\n  d: \"M256 398c-42 0-83-20-107-53a10 10 0 0116-13 113 113 0 00182 0 10 10 0 1116 13c-24 33-64 53-107 53zM182 151h-50a10 10 0 110-21h50a10 10 0 110 21zM380 151h-50a10 10 0 110-21h50a10 10 0 110 21z\"\n}));\n\nvar _ref8 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#5a4650\",\n  d: \"M157 281c-32 0-58-22-58-50 0-27 26-49 58-49s58 22 58 49c0 28-26 50-58 50z\"\n});\n\nvar _ref9 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#84737b\",\n  d: \"M157 206c22 0 41 6 56 14-6-22-29-38-56-38s-50 16-56 38c14-8 34-14 56-14z\"\n});\n\nvar _ref10 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#6e5a64\",\n  d: \"M281 231c0 37 33 66 74 66s74-29 74-66v-4c0-6 3-11 8-14l2-2c4-3 7-8 7-13v-16c0-5-4-9-8-9h-34c-8 0-15-1-22-3-9-3-18-5-27-5-41 0-74 30-74 66z\"\n});\n\nvar _ref11 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#5a4650\",\n  d: \"M297 231c0-27 26-49 58-49s58 22 58 49c0 28-26 50-58 50s-58-22-58-50z\"\n});\n\nvar _ref12 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#84737b\",\n  d: \"M355 206c-22 0-41 6-56 14 6-22 29-38 56-38s50 16 56 38c-14-8-34-14-56-14z\"\n});\n\nvar SvgCool = function SvgCool(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 512 512\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9, _ref10, _ref11, _ref12);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgCool, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/cool.76aceb28.svg\";\nexport { ForwardRef as ReactComponent };","import { keyframes } from \"styled-components\";\nimport { darken } from \"polished\";\n\nexport const colors = {\n  primary: \"#FFD400\",\n  secondary: \"#3482B9\",\n  positive: \"#49C04A\",\n  negative: \"#D03930\",\n  neutral: \"#AAA\",\n  light: \"#ABE0F9\",\n  muted: \"#EAEAEA\",\n  hotpink: \"#FC8BA4\",\n  black: \"#333\",\n  white: \"#FFF\",\n  gray: \"#CCC\",\n  dark: \"#666\",\n  shadow: \"rgba(0, 0, 0, 0.4)\"\n} as const;\n\nexport const radii = {\n  default: \"0.2rem\",\n  sm: \"0.1rem\",\n  md: \"0.2rem\",\n  lg: \"0.3rem\",\n  xl: \"0.4rem\",\n  xxl: \"0.6rem\",\n  xxxl: \"1rem\",\n  round: \"1000px\"\n} as const;\n\nexport const shadows = {\n  default: `0 1px 2px ${colors.shadow}`,\n  inset: `inset 1px 0 2px`,\n  top: `0 -2px 6px ${colors.shadow}`,\n  none: \"none\"\n} as const;\n\nexport const fontFamilies = {\n  display: \"'Black Ops One', monospace\",\n  default: \"'Lato', sans-serif\",\n  voice: \"'Vollkorn', serif\"\n};\n\nconst baseFontSize = 18;\n\nexport const fontSizes = {\n  default: baseFontSize,\n  xs: baseFontSize * 0.6,\n  sm: baseFontSize * 0.8,\n  md: baseFontSize,\n  lg: baseFontSize * 1.2\n} as const;\n\nconst animations = {\n  appear: keyframes`\n    0% {\n      transform: scale(0.1);\n      opacity: 0.1;\n    }\n  `,\n  glow: keyframes`\n    70% {\n      opacity: 1;\n      background-color: ${darken(0.2, colors.negative)};\n    }\n  `\n} as const;\n\nconst theme = {\n  colors,\n  radii,\n  fontSizes,\n  fontFamilies,\n  shadows,\n  animations\n} as const;\n\nexport type Color = keyof typeof colors;\n\nexport type Radius = keyof typeof radii;\n\nexport type FontSize = keyof typeof fontSizes;\n\nexport type FontFamily = keyof typeof fontFamilies;\n\nexport type Theme = typeof theme;\n\nexport default theme;\n","import styled, {\n  css as baseCSS,\n  ThemedCssFunction,\n  ThemedStyledInterface,\n  ThemeProps as BaseThemeProps,\n  useTheme as baseUseTheme,\n} from \"styled-components\";\n\nimport { Theme } from \"ui/theme\";\n\nexport type ThemeProps = BaseThemeProps<Theme>;\n\nexport type ThemedProps<P = {}> = ThemeProps & P;\n\nexport const useTheme = baseUseTheme as () => Theme;\n\nexport const getThemeProp = <P extends keyof Theme>(key: P) => <\n  TProps extends ThemeProps = ThemeProps\n>(\n  lens: ((props: TProps) => keyof Theme[P]) | keyof Theme[P]\n) => (props: TProps) => {\n  const $value = typeof lens === \"function\" ? lens(props) : lens;\n\n  return props.theme[key][$value];\n};\n\nexport const getColor = getThemeProp(\"colors\");\nexport const getRadius = getThemeProp(\"radii\");\nexport const getFontSize = getThemeProp(\"fontSizes\");\nexport const getShadow = getThemeProp(\"shadows\");\nexport const getFontFamily = getThemeProp(\"fontFamilies\");\nexport const getAnimation = getThemeProp(\"animations\");\n\nexport const css = baseCSS as ThemedCssFunction<Theme>;\nexport default styled as ThemedStyledInterface<Theme>;\n","import { css } from \"styled-components\";\nimport styled, {\n  getColor,\n  getFontFamily,\n  getShadow,\n  getAnimation\n} from \"ui/styled\";\n\nexport const BOARD_WIDTH = \"1072.16px\";\nexport const BOARD_HEIGHT = \"840.44px\";\n\nexport const APP_BAR_HEIGHT = \"3.8rem\";\nexport const FOOTER_HEIGHT = \"3.8rem\";\nexport const CONTENT_MARGIN = \"1rem\";\n\nexport const Root = styled.div`\n  font-family: ${getFontFamily(\"default\")};\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  font-size: 16px;\n  background: ${getColor(\"muted\")};\n`;\n\nexport const AppBar = styled.header`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: ${APP_BAR_HEIGHT};\n  background: ${getColor(\"black\")};\n  box-shadow: ${getShadow(\"default\")};\n`;\n\nexport const Clamp = styled.div`\n  display: flex;\n  width: calc(${BOARD_WIDTH} - 1rem);\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between;\n  @media screen and (max-width: ${BOARD_WIDTH}) {\n    width: 100vw;\n    padding-left: 0.5rem;\n    padding-right: 0.5rem;\n  }\n`;\n\nexport const Brand = styled.div`\n  font-family: ${getFontFamily(\"display\")};\n  color: ${getColor(\"primary\")};\n  font-size: 2rem;\n  display: flex;\n  flex: 1;\n  text-shadow: 4px 4px 2px rgba(0, 0, 0, 0.9);\n  @media screen and (max-width: 360px) {\n    font-size: 1.5rem;\n  }\n`;\n\nexport const Controls = styled.nav`\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  align-items: flex-end;\n`;\n\nexport const StatusDisplay = styled.div<{ isGameOver: boolean }>`\n  background: ${getColor(\"shadow\")};\n  box-shadow: ${getShadow(\"default\")};\n  border-radius: 50%;\n  width: 4rem;\n  height: 4rem;\n  margin-top: 1rem;\n  padding: 0.5rem;\n  animation: ${p =>\n    p.isGameOver\n      ? css`\n          ${getAnimation(\"glow\")} 4s infinite ease\n        `\n      : \"none\"};\n`;\n\nexport const Content = styled.main`\n  display: flex;\n  max-width: calc(100vw - ${CONTENT_MARGIN});\n  max-height: calc(\n    100vh - ((2 * ${CONTENT_MARGIN}) + ${APP_BAR_HEIGHT} + ${FOOTER_HEIGHT})\n  );\n  margin-top: ${CONTENT_MARGIN};\n  margin-bottom: ${CONTENT_MARGIN};\n  -ms-overflow-style: none;\n  @media screen and (max-height: ${BOARD_HEIGHT}) {\n    overflow: scroll;\n  }\n  @media screen and (max-width: ${BOARD_WIDTH}) {\n    overflow: scroll;\n  }\n`;\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"defs\", null);\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#fc644f\",\n  d: \"M389 271l121 163c-91 30-300 24-381-18V126c80 41 290 49 381 18L389 271z\"\n});\n\nvar _ref4 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#f1543f\",\n  d: \"M129 415l65-32-48-145-17 24z\"\n});\n\nvar _ref5 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#ff7058\",\n  d: \"M41 47v289s75-20 152 46V94C116 27 41 47 41 47z\"\n});\n\nvar _ref6 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#40596b\",\n  d: \"M32 0C16 0 2 13 2 29v483h59V29C61 13 48 0 32 0z\"\n});\n\nvar SvgFlag = function SvgFlag(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 512 512\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3, _ref4, _ref5, _ref6);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgFlag, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/flag.5193edf2.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useMemo } from \"react\";\nimport omit from \"ramda/es/omit\";\n\nimport { Tile } from \"lib/game\";\nimport { useLongPress } from \"lib/hooks\";\n\nimport styled, {\n  getShadow,\n  getRadius,\n  getColor,\n  getAnimation,\n} from \"ui/styled\";\n\nimport { ReactComponent as MineIcon } from \"assets/mine.svg\";\nimport { ReactComponent as FlagIcon } from \"assets/flag.svg\";\n\nexport const Mine = styled(MineIcon)`\n  width: 1.4rem;\n  height: 1.4rem;\n  animation: ${getAnimation(\"appear\")} 0.2s ease-in-out;\n`;\n\nexport const Flag = styled(FlagIcon)`\n  width: 1.4rem;\n  height: 1.4rem;\n  animation: ${getAnimation(\"appear\")} 0.2s ease-in-out;\n`;\n\nconst numberColors: Record<number, string> = {\n  0: \"white\",\n  1: \"blue\",\n  2: \"green\",\n  3: \"red\",\n  4: \"darkblue\",\n  5: \"darkgreen\",\n  6: \"darkred\",\n  7: \"purple\",\n  8: \"darkpurple\",\n};\n\ninterface Props extends Tile {\n  onLongPress(): void;\n  onClick(): void;\n  active?: boolean;\n}\n\nconst GridTileContainer = styled.div<Omit<Props, \"onLongPress\">>`\n  width: 1.8rem;\n  height: 1.8rem;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  box-shadow: ${getShadow((props) => (props.revealed ? \"none\" : \"default\"))};\n  border-radius: ${getRadius(\"lg\")};\n  margin: 0.2rem;\n  padding: 0.2rem;\n  background: ${getColor((props) =>\n    props.revealed\n      ? props.kind === \"mine\" && props.active\n        ? \"negative\"\n        : \"white\"\n      : \"gray\"\n  )};\n  transition: all 0.2s ease-in-out;\n  font-weight: bold;\n  user-select: none;\n  ${(props) =>\n    // dynamic number-color mapping\n    typeof props.children === \"number\"\n      ? `color:  ${numberColors[props.children]}`\n      : undefined};\n`;\n\nconst GridTile: React.FC<Props> = (props) => {\n  const content = useMemo(() => {\n    if (props.defused) {\n      return <Flag />;\n    }\n    if (!props.revealed || props.kind === \"safe\") {\n      return null;\n    }\n\n    switch (props.kind) {\n      case \"empty\":\n        return props.surroundingMines;\n      case \"mine\":\n        return <Mine />;\n    }\n  }, [props]);\n\n  const longPressProps = useLongPress(props.onLongPress, 400);\n\n  return (\n    <GridTileContainer\n      {...omit([\"onLongPress\"], props)}\n      {...longPressProps}\n      active={props.active}\n    >\n      {content}\n    </GridTileContainer>\n  );\n};\n\nexport default GridTile;\n","import React, { useCallback } from \"react\";\n\nimport styled from \"ui/styled\";\nimport { Tile } from \"lib/game\";\nimport { Matrix, Cell } from \"lib/Grid\";\n\nimport GridTile from \"./GridTile\";\n\nexport const GridContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n`;\n\nexport const GridRow = styled.div`\n  display: flex;\n`;\n\ninterface Props {\n  grid: Matrix<Tile>;\n  onTileClick(cell: Cell<Tile>): void;\n  onTileLongPress(cell: Cell<Tile>): void;\n  activeCell?: Cell<Tile>;\n}\n\nconst GridComponent: React.FC<Props> = props => {\n  const handleClick = useCallback(\n    (cell: Cell<Tile>) => () => props.onTileClick(cell),\n    [props]\n  );\n\n  const handleLongPress = useCallback(\n    (cell: Cell<Tile>) => () => props.onTileLongPress(cell),\n    [props]\n  );\n\n  return (\n    <GridContainer>\n      {props.grid.map((row, y) => (\n        <GridRow key={y}>\n          {row.map((cell, x) => (\n            <GridTile\n              key={x}\n              {...cell.value}\n              active={\n                cell.row === props.activeCell?.row &&\n                cell.column === props.activeCell?.column\n              }\n              onClick={handleClick(cell)}\n              onLongPress={handleLongPress(cell)}\n            />\n          ))}\n        </GridRow>\n      ))}\n    </GridContainer>\n  );\n};\n\nexport default GridComponent;\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"defs\", null);\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M256 5a257 257 0 00-81 501c13 3 18-5 18-12l-1-44c-71 16-86-34-86-34-12-30-28-38-28-38-24-16 1-16 1-16 26 2 39 27 39 27 23 39 60 28 75 21 2-16 9-28 16-34-57-7-116-29-116-127 0-28 10-51 26-69-3-7-11-33 3-68 0 0 21-7 70 26a244 244 0 01128 0c49-33 70-26 70-26 14 35 6 61 3 68 16 18 26 41 26 69 0 99-60 120-117 127 10 8 18 23 18 47v71c0 7 4 15 17 12A257 257 0 00256 5z\"\n});\n\nvar SvgGithub = function SvgGithub(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 512 512\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgGithub, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/github.1c80c8c6.svg\";\nexport { ForwardRef as ReactComponent };","import React from \"react\";\n\nimport styled, {\n  getColor,\n  getShadow,\n  getRadius,\n  getAnimation\n} from \"ui/styled\";\n\nimport { ReactComponent as GithubSVG } from \"assets/github.svg\";\n\nexport const GithubIcon = styled(GithubSVG)`\n  height: 2rem;\n  width: 2rem;\n`;\n\nexport const GithubLabel = styled.div`\n  white-space: nowrap;\n  font-size: 0.9rem;\n`;\n\nexport const GithubBadge = styled.a`\n  border-radius: ${getRadius(\"round\")};\n  color: ${getColor(\"secondary\")};\n  background: ${getColor(\"white\")};\n  display: flex;\n  padding: 0.4rem;\n  width: 2.2rem;\n  height: 2.2rem;\n  overflow: hidden;\n  ${GithubLabel} {\n    display: none;\n  }\n  justify-content: space-around;\n  align-items: center;\n  box-shadow: ${getShadow(\"default\")};\n  font-weight: 700;\n  text-decoration: none;\n  :hover {\n    ${GithubLabel} {\n      display: flex;\n      animation: ${getAnimation(\"appear\")} 0.3s ease;\n      padding: 0.4rem;\n    }\n    width: 12rem;\n    border-radius: 2rem;\n  }\n  transition: all 0.3s ease-in-out;\n  user-select: none;\n  outline: none;\n`;\n\nconst Github: React.FC = () => {\n  return (\n    <GithubBadge\n      target=\"_blank\"\n      rel=\"noreferrer\"\n      href=\"https://github.com/alanrsoares/ts-mines\"\n      aria-label=\"got to the project's github page\"\n    >\n      <GithubIcon />\n      <GithubLabel>@alanrsoares/ts-mines</GithubLabel>\n    </GithubBadge>\n  );\n};\n\nexport default Github;\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"defs\", null);\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"circle\", {\n  cx: 256.3,\n  cy: 256,\n  r: 245,\n  fill: \"#fec753\"\n});\n\nvar _ref4 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#35528c\",\n  d: \"M256 105C133 105 30 217 3 248c-4 5-4 11 0 16 27 31 130 143 253 143s226-112 253-143c4-5 4-11 0-16-27-31-130-143-253-143z\"\n});\n\nvar _ref5 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#1f3a60\",\n  d: \"M42 256c0-24 96-151 214-151C134 105 31 215 4 247c-5 5-5 13 0 18 27 32 130 142 252 142-118 0-214-127-214-151z\"\n});\n\nvar _ref6 =\n/*#__PURE__*/\nReact.createElement(\"circle\", {\n  cx: 256,\n  cy: 256,\n  r: 132,\n  fill: \"#99d3ff\"\n});\n\nvar _ref7 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"#5bb3ce\",\n  d: \"M176 256c0-64 46-117 106-129a133 133 0 00-158 129 132 132 0 00158 129c-60-12-106-65-106-129z\"\n});\n\nvar _ref8 =\n/*#__PURE__*/\nReact.createElement(\"circle\", {\n  cx: 254.6,\n  cy: 256,\n  r: 65.6,\n  fill: \"#1f3a60\"\n});\n\nvar _ref9 =\n/*#__PURE__*/\nReact.createElement(\"circle\", {\n  cx: 308.1,\n  cy: 225.6,\n  r: 27.9,\n  fill: \"#dcf3ff\"\n});\n\nvar SvgEye = function SvgEye(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 512 512\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgEye, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/eye.a2510f3f.svg\";\nexport { ForwardRef as ReactComponent };","import React from \"react\";\nimport { darken } from \"polished\";\n\nimport { Mode } from \"lib/game\";\n\nimport styled, { getColor, getShadow, getRadius } from \"ui/styled\";\n\nimport { Color } from \"ui/theme\";\nimport { Clamp, FOOTER_HEIGHT } from \"ui/components/core\";\nimport Github from \"ui/components/Github\";\nimport { ReactComponent as EyeIcon } from \"assets/eye.svg\";\nimport { ReactComponent as FlagIcon } from \"assets/flag.svg\";\n\nconst Eye = styled(EyeIcon)`\n  width: 1rem;\n  height: 1rem;\n`;\n\nconst Flag = styled(FlagIcon)`\n  width: 1rem;\n  height: 1rem;\n`;\n\nconst Circle = styled.div<{ active: boolean }>`\n  border-radius: ${getRadius(\"round\")};\n  background-color: ${(p) =>\n    p.active ? getColor(\"gray\")(p) : darken(0.1, getColor(\"gray\")(p))};\n  width: 1.8rem;\n  height: 1.8rem;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 0.1rem;\n  transition-delay: 0.3s;\n  transition: background-color 0.2s ease-in-out;\n  box-shadow: ${getShadow((p) => (p.active ? \"inset\" : \"default\"))};\n`;\n\nexport const Button = styled.button<{\n  color: Color;\n  side: \"left\" | \"right\";\n  active?: boolean;\n}>`\n    border: none;\n    background-color: ${(p) => {\n      const color = getColor(p.color)(p);\n      return p.active ? color : darken(0.5, color);\n    }};\n    height: 2.8rem;\n    width: 4rem;\n    ${(p) => `\n      border-top-${p.side}-radius: 2rem;\n      border-bottom-${p.side}-radius: 2rem;\n    `}\n    box-shadow: ${getShadow((p) => (p.active ? \"inset\" : \"default\"))};\n    outline: none;\n    transition: all .1s ease;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    transition: all 0.3s ease-in-out;\n  `;\n\nexport const ButtonGroup = styled.div`\n  display: flex;\n`;\n\nexport const Root = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: ${FOOTER_HEIGHT};\n  background: ${getColor(\"dark\")};\n  color: ${getColor(\"white\")};\n  box-shadow: ${getShadow(\"default\")};\n  position: fixed;\n  bottom: 0;\n`;\n\nconst Footer: React.FC<{\n  onToggleGameMode(): void;\n  gameMode: Mode;\n}> = (props) => {\n  return (\n    <Root>\n      <Clamp>\n        <Github />\n        <ButtonGroup>\n          <Button\n            side=\"left\"\n            color=\"white\"\n            active={props.gameMode === \"defuse\"}\n            onClick={props.onToggleGameMode}\n            aria-label=\"Toggle game mode\"\n          >\n            <Circle active={props.gameMode === \"defuse\"}>\n              <Flag />\n            </Circle>\n          </Button>\n          <Button\n            side=\"right\"\n            color=\"white\"\n            active={props.gameMode === \"reveal\"}\n            onClick={props.onToggleGameMode}\n            aria-label=\"Toggle game mode\"\n          >\n            <Circle active={props.gameMode === \"reveal\"}>\n              <Eye />\n            </Circle>\n          </Button>\n        </ButtonGroup>\n      </Clamp>\n    </Root>\n  );\n};\n\nexport default Footer;\n","import React from \"react\";\n\nimport styled, { getColor, getRadius } from \"ui/styled\";\n\nimport { ReactComponent as EyeIcon } from \"assets/eye.svg\";\n\nexport const Root = styled.div`\n  display: flex;\n  color: ${getColor(\"primary\")};\n  min-width: 8rem;\n  flex-direction: column;\n  align-items: center;\n  background: ${getColor(\"shadow\")};\n  border-radius: ${getRadius(\"lg\")};\n  height: 3rem;\n  justify-content: space-around;\n  @media screen and (max-width: 360px) {\n    min-width: 6rem;\n  }\n`;\n\nexport const ProgressContainer = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: ${getColor(\"primary\")};\n  font-size: 1.6rem;\n`;\n\nexport const ProgressLine = styled.div<{ progress: number }>`\n  height: 0.3rem;\n  overflow: hidden;\n  border-radius: ${getRadius(\"default\")};\n  width: 80%;\n  align-self: center;\n  background: linear-gradient(\n    to right,\n    ${getColor(\"positive\")} 0%,\n    ${getColor(\"positive\")} ${p => p.progress}%,\n    ${getColor(\"white\")} ${p => p.progress}%,\n    ${getColor(\"white\")} 100%\n  );\n`;\n\nexport const ProgressIcon = styled(EyeIcon)`\n  width: 0.9rem;\n  height: 0.9rem;\n  margin-right: 0.5rem;\n`;\n\nconst Score: React.FC<{ score: number; progress: number }> = props => {\n  return (\n    <Root>\n      <ProgressContainer>\n        <ProgressIcon /> {props.score}\n      </ProgressContainer>\n      <ProgressLine progress={props.progress} />\n    </Root>\n  );\n};\n\nexport default Score;\n","import React from \"react\";\nimport { ThemeProvider } from \"styled-components\";\n\nimport * as Game from \"lib/game\";\nimport useUpdateChecker, { UPDATE_CHECK_INTERVAL } from \"lib/useUpdateChecker\";\nimport { useRightClick, useGameState } from \"lib/hooks\";\n\nimport { ReactComponent as SkullIcon } from \"assets/skull.svg\";\nimport { ReactComponent as ThinkingIcon } from \"assets/thinking.svg\";\nimport { ReactComponent as CoolIcon } from \"assets/cool.svg\";\n\nimport theme from \"ui/theme\";\nimport {\n  Root,\n  AppBar,\n  Brand,\n  StatusDisplay,\n  Content,\n  Clamp,\n  Controls,\n} from \"ui/components/core\";\nimport GridComponent from \"ui/components/Grid\";\nimport Footer from \"ui/components/Footer\";\nimport Score from \"ui/components/Score\";\n\nconst STATUS_ICONS: Record<Game.GameStatus, JSX.Element> = {\n  new: <ThinkingIcon />,\n  won: <CoolIcon />,\n  over: <SkullIcon />,\n};\n\nconst StatusIcon: React.FC<{ status: Game.GameStatus }> = (props) =>\n  STATUS_ICONS[props.status];\n\nconst NO_OP = () => {};\n\nexport function App() {\n  useUpdateChecker(UPDATE_CHECK_INTERVAL);\n  useRightClick(NO_OP);\n\n  const { state, handlers } = useGameState();\n\n  return (\n    <Root>\n      <AppBar>\n        <Clamp>\n          <Brand>[MINES]</Brand>\n          <StatusDisplay\n            isGameOver={state.gameStatus === \"over\"}\n            onClick={handlers.onStatusClick}\n          >\n            <StatusIcon status={state.gameStatus} />\n          </StatusDisplay>\n          <Controls>\n            <Score score={state.score} progress={state.progress} />\n          </Controls>\n        </Clamp>\n      </AppBar>\n      <Content>\n        <GridComponent\n          grid={state.grid}\n          activeCell={state.activeCell}\n          onTileClick={handlers.onCellClick}\n          onTileLongPress={handlers.onCellLongPress}\n        />\n      </Content>\n      <Footer\n        onToggleGameMode={handlers.onToggleGameMode}\n        gameMode={state.gameMode}\n      />\n    </Root>\n  );\n}\n\nexport default function () {\n  return (\n    <ThemeProvider theme={theme}>\n      <App />\n    </ThemeProvider>\n  );\n}\n","import { useEffect } from \"react\";\n\nexport function semverGreaterThan(\n  latestVersion: string,\n  currentVersion: string\n) {\n  const latestParts = latestVersion.split(/\\./g);\n  const currentParts = currentVersion.split(/\\./g);\n\n  while (latestParts.length || currentParts.length) {\n    const a = Number(latestParts.shift());\n    const b = Number(currentParts.shift());\n\n    if (a === b) {\n      continue;\n    }\n\n    return a > b || isNaN(b);\n  }\n\n  return false;\n}\n\n/**\n * Wraps fetch with a concurrent timeout-based callback\n *\n * @param {number} timeout  - timeout in milliseconds\n * @param {Function} [onTimeout] - timeout callback\n */\nexport const fetchWithTimeout = (\n  timeout: number,\n  onTimeout: () => void = () => {\n    throw new Error(\"Timeout exceeded\");\n  }\n) => async (url: string) => {\n  // this forces a 5s timeout in case the request hangs\n  const timeoutHandle = window.setTimeout(onTimeout, timeout);\n  const response = await fetch(url);\n  // cancels the timeout once the request is resolved\n  window.clearTimeout(timeoutHandle);\n  return response;\n};\n\nexport async function purgeCache() {\n  if (window.caches) {\n    const keys = await window.caches.keys();\n    const deleteKeys = keys.map((key) => window.caches.delete(key));\n\n    await Promise.all(deleteKeys);\n  }\n}\n\nexport async function checkForAppUpdates() {\n  const onTimeout = () => {\n    throw new Error(\"Timout reached while fetching meta.json\");\n  };\n\n  const fetchWithTimeoutHandler = fetchWithTimeout(5000, onTimeout);\n\n  const response = await fetchWithTimeoutHandler(`meta.json?t=${Date.now()}`);\n  const meta = await response.json();\n  const latestVersion = meta.version;\n  const currentVersion = global.appVersion;\n\n  return semverGreaterThan(latestVersion, currentVersion);\n}\n\n/**\n * Forces window to reload\n */\nexport function forceReload() {\n  window.location.reload(true);\n}\n\nexport async function tryInstallUpdate() {\n  try {\n    await purgeCache();\n    window.setTimeout(forceReload, 300);\n  } catch (error) {\n    console.log(\"Failed to purge cache\", error);\n  }\n}\n\nexport async function tryCheckForUpdates() {\n  try {\n    const hasUpdates = await checkForAppUpdates();\n    if (\n      hasUpdates &&\n      window.confirm(\"A new version is available, would you like to update?\")\n    ) {\n      await tryInstallUpdate();\n    }\n  } catch (error) {\n    console.log(`Failed to check for updates:`, error);\n  }\n}\n\nexport const UPDATE_CHECK_INTERVAL = 60000 * 30;\n\nexport default function useUpdateChecker(interval = UPDATE_CHECK_INTERVAL) {\n  useEffect(() => {\n    tryCheckForUpdates();\n    const intervalId = window.setInterval(tryCheckForUpdates, interval);\n\n    return () => {\n      window.clearInterval(intervalId);\n    };\n  }, [interval]);\n}\n"],"sourceRoot":""}